{"ast":null,"code":"import React from 'react';\n\nfunction createCommonjsModule(fn) {\n  var module = {\n    exports: {}\n  };\n  return fn(module, module.exports), module.exports;\n}\n\nvar icon = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.fullIcon = exports.iconDefaults = exports.minifyProps = exports.matchName = void 0;\n  /**\n   * Expression to test part of icon name.\n   */\n\n  exports.matchName = /^[a-z0-9]+(-[a-z0-9]+)*$/;\n  /**\n   * Properties that can be minified\n   *\n   * Values of all these properties are awalys numbers\n   */\n\n  exports.minifyProps = [// All IconifyDimenisons properties\n  'width', 'height', 'top', 'left'];\n  /**\n   * Default values for all optional IconifyIcon properties\n   */\n\n  exports.iconDefaults = Object.freeze({\n    left: 0,\n    top: 0,\n    width: 16,\n    height: 16,\n    rotate: 0,\n    vFlip: false,\n    hFlip: false\n  });\n  /**\n   * Add optional properties to icon\n   */\n\n  function fullIcon(data) {\n    return { ...exports.iconDefaults,\n      ...data\n    };\n  }\n\n  exports.fullIcon = fullIcon;\n});\nvar name = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.validateIcon = exports.stringToIcon = void 0;\n  /**\n   * Convert string to Icon object.\n   */\n\n  const stringToIcon = (value, validate, allowSimpleName, provider = '') => {\n    const colonSeparated = value.split(':'); // Check for provider with correct '@' at start\n\n    if (value.slice(0, 1) === '@') {\n      // First part is provider\n      if (colonSeparated.length < 2 || colonSeparated.length > 3) {\n        // \"@provider:prefix:name\" or \"@provider:prefix-name\"\n        return null;\n      }\n\n      provider = colonSeparated.shift().slice(1);\n    } // Check split by colon: \"prefix:name\", \"provider:prefix:name\"\n\n\n    if (colonSeparated.length > 3 || !colonSeparated.length) {\n      return null;\n    }\n\n    if (colonSeparated.length > 1) {\n      // \"prefix:name\"\n      const name = colonSeparated.pop();\n      const prefix = colonSeparated.pop();\n      const result = {\n        // Allow provider without '@': \"provider:prefix:name\"\n        provider: colonSeparated.length > 0 ? colonSeparated[0] : provider,\n        prefix,\n        name\n      };\n      return validate && !exports.validateIcon(result) ? null : result;\n    } // Attempt to split by dash: \"prefix-name\"\n\n\n    const name = colonSeparated[0];\n    const dashSeparated = name.split('-');\n\n    if (dashSeparated.length > 1) {\n      const result = {\n        provider: provider,\n        prefix: dashSeparated.shift(),\n        name: dashSeparated.join('-')\n      };\n      return validate && !exports.validateIcon(result) ? null : result;\n    } // If allowEmpty is set, allow empty provider and prefix, allowing names like \"home\"\n\n\n    if (allowSimpleName && provider === '') {\n      const result = {\n        provider: provider,\n        prefix: '',\n        name\n      };\n      return validate && !exports.validateIcon(result, allowSimpleName) ? null : result;\n    }\n\n    return null;\n  };\n\n  exports.stringToIcon = stringToIcon;\n  /**\n   * Check if icon is valid.\n   *\n   * This function is not part of stringToIcon because validation is not needed for most code.\n   */\n\n  const validateIcon = (icon$1, allowSimpleName) => {\n    if (!icon$1) {\n      return false;\n    }\n\n    return !!((icon$1.provider === '' || icon$1.provider.match(icon.matchName)) && (allowSimpleName && icon$1.prefix === '' || icon$1.prefix.match(icon.matchName)) && icon$1.name.match(icon.matchName));\n  };\n\n  exports.validateIcon = validateIcon;\n});\nvar merge = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.mergeIconData = void 0;\n  /**\n   * Merge icon and alias\n   */\n\n  function mergeIconData(icon$1, alias) {\n    const result = { ...icon$1\n    };\n\n    for (const key in icon.iconDefaults) {\n      const prop = key;\n\n      if (alias[prop] !== void 0) {\n        const value = alias[prop];\n\n        if (result[prop] === void 0) {\n          // Missing value\n          result[prop] = value;\n          continue;\n        }\n\n        switch (prop) {\n          case 'rotate':\n            result[prop] = (result[prop] + value) % 4;\n            break;\n\n          case 'hFlip':\n          case 'vFlip':\n            result[prop] = value !== result[prop];\n            break;\n\n          default:\n            // Overwrite value\n            result[prop] = value;\n        }\n      }\n    }\n\n    return result;\n  }\n\n  exports.mergeIconData = mergeIconData;\n});\nvar parse = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.parseIconSet = void 0;\n  /**\n   * Get list of defaults keys\n   */\n\n  const defaultsKeys = Object.keys(icon.iconDefaults);\n  /**\n   * Resolve alias\n   */\n\n  function resolveAlias(alias, icons, aliases, level = 0) {\n    const parent = alias.parent;\n\n    if (icons[parent] !== void 0) {\n      return merge.mergeIconData(icons[parent], alias);\n    }\n\n    if (aliases[parent] !== void 0) {\n      if (level > 2) {\n        // icon + alias + alias + alias = too much nesting, possibly infinite\n        return null;\n      }\n\n      const icon = resolveAlias(aliases[parent], icons, aliases, level + 1);\n\n      if (icon) {\n        return merge.mergeIconData(icon, alias);\n      }\n    }\n\n    return null;\n  }\n  /**\n   * Extract icons from an icon set\n   */\n\n\n  function parseIconSet(data, callback, list = 'none') {\n    const added = []; // Must be an object\n\n    if (typeof data !== 'object') {\n      return list === 'none' ? false : added;\n    } // Check for missing icons list returned by API\n\n\n    if (data.not_found instanceof Array) {\n      data.not_found.forEach(name => {\n        callback(name, null);\n\n        if (list === 'all') {\n          added.push(name);\n        }\n      });\n    } // Must have 'icons' object\n\n\n    if (typeof data.icons !== 'object') {\n      return list === 'none' ? false : added;\n    } // Get default values\n\n\n    const defaults = Object.create(null);\n    defaultsKeys.forEach(key => {\n      if (data[key] !== void 0 && typeof data[key] !== 'object') {\n        defaults[key] = data[key];\n      }\n    }); // Get icons\n\n    const icons = data.icons;\n    Object.keys(icons).forEach(name => {\n      const icon$1 = icons[name];\n\n      if (typeof icon$1.body !== 'string') {\n        return;\n      } // Freeze icon to make sure it will not be modified\n\n\n      callback(name, Object.freeze({ ...icon.iconDefaults,\n        ...defaults,\n        ...icon$1\n      }));\n      added.push(name);\n    }); // Get aliases\n\n    if (typeof data.aliases === 'object') {\n      const aliases = data.aliases;\n      Object.keys(aliases).forEach(name => {\n        const icon$1 = resolveAlias(aliases[name], icons, aliases, 1);\n\n        if (icon$1) {\n          // Freeze icon to make sure it will not be modified\n          callback(name, Object.freeze({ ...icon.iconDefaults,\n            ...defaults,\n            ...icon$1\n          }));\n          added.push(name);\n        }\n      });\n    }\n\n    return list === 'none' ? added.length > 0 : added;\n  }\n\n  exports.parseIconSet = parseIconSet;\n});\nvar storage_1 = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.listIcons = exports.getIcon = exports.iconExists = exports.addIcon = exports.addIconSet = exports.getStorage = exports.newStorage = void 0;\n  /**\n   * Storage by provider and prefix\n   */\n\n  const storage = Object.create(null);\n  /**\n   * Create new storage\n   */\n\n  function newStorage(provider, prefix) {\n    return {\n      provider,\n      prefix,\n      icons: Object.create(null),\n      missing: Object.create(null)\n    };\n  }\n\n  exports.newStorage = newStorage;\n  /**\n   * Get storage for provider and prefix\n   */\n\n  function getStorage(provider, prefix) {\n    if (storage[provider] === void 0) {\n      storage[provider] = Object.create(null);\n    }\n\n    const providerStorage = storage[provider];\n\n    if (providerStorage[prefix] === void 0) {\n      providerStorage[prefix] = newStorage(provider, prefix);\n    }\n\n    return providerStorage[prefix];\n  }\n\n  exports.getStorage = getStorage;\n  /**\n   * Add icon set to storage\n   *\n   * Returns array of added icons if 'list' is true and icons were added successfully\n   */\n\n  function addIconSet(storage, data, list = 'none') {\n    const t = Date.now();\n    return parse.parseIconSet(data, (name, icon) => {\n      if (icon === null) {\n        storage.missing[name] = t;\n      } else {\n        storage.icons[name] = icon;\n      }\n    }, list);\n  }\n\n  exports.addIconSet = addIconSet;\n  /**\n   * Add icon to storage\n   */\n\n  function addIcon(storage, name, icon$1) {\n    try {\n      if (typeof icon$1.body === 'string') {\n        // Freeze icon to make sure it will not be modified\n        storage.icons[name] = Object.freeze(icon.fullIcon(icon$1));\n        return true;\n      }\n    } catch (err) {// Do nothing\n    }\n\n    return false;\n  }\n\n  exports.addIcon = addIcon;\n  /**\n   * Check if icon exists\n   */\n\n  function iconExists(storage, name) {\n    return storage.icons[name] !== void 0;\n  }\n\n  exports.iconExists = iconExists;\n  /**\n   * Get icon data\n   */\n\n  function getIcon(storage, name) {\n    const value = storage.icons[name];\n    return value === void 0 ? null : value;\n  }\n\n  exports.getIcon = getIcon;\n  /**\n   * List available icons\n   */\n\n  function listIcons(provider, prefix) {\n    let allIcons = []; // Get providers\n\n    let providers;\n\n    if (typeof provider === 'string') {\n      providers = [provider];\n    } else {\n      providers = Object.keys(storage);\n    } // Get all icons\n\n\n    providers.forEach(provider => {\n      let prefixes;\n\n      if (typeof provider === 'string' && typeof prefix === 'string') {\n        prefixes = [prefix];\n      } else {\n        prefixes = storage[provider] === void 0 ? [] : Object.keys(storage[provider]);\n      }\n\n      prefixes.forEach(prefix => {\n        const storage = getStorage(provider, prefix);\n        const icons = Object.keys(storage.icons).map(name => (provider !== '' ? '@' + provider + ':' : '') + prefix + ':' + name);\n        allIcons = allIcons.concat(icons);\n      });\n    });\n    return allIcons;\n  }\n\n  exports.listIcons = listIcons;\n});\nvar functions$3 = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.storageFunctions = exports.addCollection = exports.addIcon = exports.getIconData = exports.allowSimpleNames = void 0;\n  /**\n   * Allow storing icons without provider or prefix, making it possible to store icons like \"home\"\n   */\n\n  let simpleNames = false;\n\n  function allowSimpleNames(allow) {\n    if (typeof allow === 'boolean') {\n      simpleNames = allow;\n    }\n\n    return simpleNames;\n  }\n\n  exports.allowSimpleNames = allowSimpleNames;\n  /**\n   * Get icon data\n   */\n\n  function getIconData(name$1) {\n    const icon = typeof name$1 === 'string' ? name.stringToIcon(name$1, true, simpleNames) : name$1;\n    return icon ? storage_1.getIcon(storage_1.getStorage(icon.provider, icon.prefix), icon.name) : null;\n  }\n\n  exports.getIconData = getIconData;\n  /**\n   * Add one icon\n   */\n\n  function addIcon(name$1, data) {\n    const icon = name.stringToIcon(name$1, true, simpleNames);\n\n    if (!icon) {\n      return false;\n    }\n\n    const storage = storage_1.getStorage(icon.provider, icon.prefix);\n    return storage_1.addIcon(storage, icon.name, data);\n  }\n\n  exports.addIcon = addIcon;\n  /**\n   * Add icon set\n   */\n\n  function addCollection(data, provider) {\n    if (typeof data !== 'object') {\n      return false;\n    } // Get provider\n\n\n    if (typeof provider !== 'string') {\n      provider = typeof data.provider === 'string' ? data.provider : '';\n    } // Check for simple names: requires empty provider and prefix\n\n\n    if (simpleNames && provider === '' && (typeof data.prefix !== 'string' || data.prefix === '')) {\n      // Simple names: add icons one by one\n      let added = false;\n      parse.parseIconSet(data, (name, icon) => {\n        if (icon !== null && addIcon(name, icon)) {\n          added = true;\n        }\n      });\n      return added;\n    } // Validate provider and prefix\n\n\n    if (typeof data.prefix !== 'string' || !name.validateIcon({\n      provider,\n      prefix: data.prefix,\n      name: 'a'\n    })) {\n      return false;\n    }\n\n    const storage = storage_1.getStorage(provider, data.prefix);\n    return !!storage_1.addIconSet(storage, data);\n  }\n\n  exports.addCollection = addCollection;\n  /**\n   * Export\n   */\n\n  exports.storageFunctions = {\n    // Check if icon exists\n    iconExists: name => getIconData(name) !== null,\n    // Get raw icon data\n    getIcon: name => {\n      const result = getIconData(name);\n      return result ? { ...result\n      } : null;\n    },\n    // List icons\n    listIcons: storage_1.listIcons,\n    // Add icon\n    addIcon,\n    // Add icon set\n    addCollection\n  };\n});\nvar id = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.replaceIDs = void 0;\n  /**\n   * Regular expression for finding ids\n   */\n\n  const regex = /\\sid=\"(\\S+)\"/g;\n  /**\n   * Match for allowed characters before and after id in replacement, including () for group\n   */\n\n  const replaceValue = '([^A-Za-z0-9_-])';\n  /**\n   * Escape value for 'new RegExp()'\n   */\n\n  function escapeRegExp(str) {\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\n  }\n  /**\n   * New random-ish prefix for ids\n   */\n\n\n  const randomPrefix = 'IconifyId-' + Date.now().toString(16) + '-' + (Math.random() * 0x1000000 | 0).toString(16) + '-';\n  /**\n   * Counter for ids, increasing with every replacement\n   */\n\n  let counter = 0;\n  /**\n   * Replace IDs in SVG output with unique IDs\n   * Fast replacement without parsing XML, assuming commonly used patterns and clean XML (icon should have been cleaned up with Iconify Tools or SVGO).\n   */\n\n  function replaceIDs(body, prefix = randomPrefix) {\n    // Find all IDs\n    const ids = [];\n    let match;\n\n    while (match = regex.exec(body)) {\n      ids.push(match[1]);\n    }\n\n    if (!ids.length) {\n      return body;\n    } // Replace with unique ids\n\n\n    ids.forEach(id => {\n      const newID = typeof prefix === 'function' ? prefix() : prefix + counter++;\n      body = body.replace(new RegExp(replaceValue + '(' + escapeRegExp(id) + ')' + replaceValue, 'g'), '$1' + newID + '$3');\n    });\n    return body;\n  }\n\n  exports.replaceIDs = replaceIDs;\n});\nvar size = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.calculateSize = void 0;\n  /**\n   * Regular expressions for calculating dimensions\n   */\n\n  const unitsSplit = /(-?[0-9.]*[0-9]+[0-9.]*)/g;\n  const unitsTest = /^-?[0-9.]*[0-9]+[0-9.]*$/g;\n  /**\n   * Calculate second dimension when only 1 dimension is set\n   *\n   * @param {string|number} size One dimension (such as width)\n   * @param {number} ratio Width/height ratio.\n   *      If size is width, ratio = height/width\n   *      If size is height, ratio = width/height\n   * @param {number} [precision] Floating number precision in result to minimize output. Default = 2\n   * @return {string|number} Another dimension\n   */\n\n  function calculateSize(size, ratio, precision) {\n    if (ratio === 1) {\n      return size;\n    }\n\n    precision = precision === void 0 ? 100 : precision;\n\n    if (typeof size === 'number') {\n      return Math.ceil(size * ratio * precision) / precision;\n    }\n\n    if (typeof size !== 'string') {\n      return size;\n    } // Split code into sets of strings and numbers\n\n\n    const oldParts = size.split(unitsSplit);\n\n    if (oldParts === null || !oldParts.length) {\n      return size;\n    }\n\n    const newParts = [];\n    let code = oldParts.shift();\n    let isNumber = unitsTest.test(code); // eslint-disable-next-line no-constant-condition\n\n    while (true) {\n      if (isNumber) {\n        const num = parseFloat(code);\n\n        if (isNaN(num)) {\n          newParts.push(code);\n        } else {\n          newParts.push(Math.ceil(num * ratio * precision) / precision);\n        }\n      } else {\n        newParts.push(code);\n      } // next\n\n\n      code = oldParts.shift();\n\n      if (code === void 0) {\n        return newParts.join('');\n      }\n\n      isNumber = !isNumber;\n    }\n  }\n\n  exports.calculateSize = calculateSize;\n});\nvar customisations = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.mergeCustomisations = exports.defaults = void 0;\n  /**\n   * Default icon customisations values\n   */\n\n  exports.defaults = Object.freeze({\n    // Display mode\n    inline: false,\n    // Dimensions\n    width: null,\n    height: null,\n    // Alignment\n    hAlign: 'center',\n    vAlign: 'middle',\n    slice: false,\n    // Transformations\n    hFlip: false,\n    vFlip: false,\n    rotate: 0\n  });\n  /**\n   * Convert IconifyIconCustomisations to FullIconCustomisations\n   */\n\n  function mergeCustomisations(defaults, item) {\n    const result = {};\n\n    for (const key in defaults) {\n      const attr = key; // Copy old value\n\n      result[attr] = defaults[attr];\n\n      if (item[attr] === void 0) {\n        continue;\n      } // Validate new value\n\n\n      const value = item[attr];\n\n      switch (attr) {\n        // Boolean attributes that override old value\n        case 'inline':\n        case 'slice':\n          if (typeof value === 'boolean') {\n            result[attr] = value;\n          }\n\n          break;\n        // Boolean attributes that are merged\n\n        case 'hFlip':\n        case 'vFlip':\n          if (value === true) {\n            result[attr] = !result[attr];\n          }\n\n          break;\n        // Non-empty string\n\n        case 'hAlign':\n        case 'vAlign':\n          if (typeof value === 'string' && value !== '') {\n            result[attr] = value;\n          }\n\n          break;\n        // Non-empty string / non-zero number / null\n\n        case 'width':\n        case 'height':\n          if (typeof value === 'string' && value !== '' || typeof value === 'number' && value || value === null) {\n            result[attr] = value;\n          }\n\n          break;\n        // Rotation\n\n        case 'rotate':\n          if (typeof value === 'number') {\n            result[attr] += value;\n          }\n\n          break;\n      }\n    }\n\n    return result;\n  }\n\n  exports.mergeCustomisations = mergeCustomisations;\n});\nvar build = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.iconToSVG = void 0;\n  /**\n   * Get preserveAspectRatio value\n   */\n\n  function preserveAspectRatio(props) {\n    let result = '';\n\n    switch (props.hAlign) {\n      case 'left':\n        result += 'xMin';\n        break;\n\n      case 'right':\n        result += 'xMax';\n        break;\n\n      default:\n        result += 'xMid';\n    }\n\n    switch (props.vAlign) {\n      case 'top':\n        result += 'YMin';\n        break;\n\n      case 'bottom':\n        result += 'YMax';\n        break;\n\n      default:\n        result += 'YMid';\n    }\n\n    result += props.slice ? ' slice' : ' meet';\n    return result;\n  }\n  /**\n   * Get SVG attributes and content from icon + customisations\n   *\n   * Does not generate style to make it compatible with frameworks that use objects for style, such as React.\n   * Instead, it generates 'inline' value. If true, rendering engine should add verticalAlign: -0.125em to icon.\n   *\n   * Customisations should be normalised by platform specific parser.\n   * Result should be converted to <svg> by platform specific parser.\n   * Use replaceIDs to generate unique IDs for body.\n   */\n\n\n  function iconToSVG(icon, customisations) {\n    // viewBox\n    const box = {\n      left: icon.left,\n      top: icon.top,\n      width: icon.width,\n      height: icon.height\n    }; // Body\n\n    let body = icon.body; // Apply transformations\n\n    [icon, customisations].forEach(props => {\n      const transformations = [];\n      const hFlip = props.hFlip;\n      const vFlip = props.vFlip;\n      let rotation = props.rotate; // Icon is flipped first, then rotated\n\n      if (hFlip) {\n        if (vFlip) {\n          rotation += 2;\n        } else {\n          // Horizontal flip\n          transformations.push('translate(' + (box.width + box.left) + ' ' + (0 - box.top) + ')');\n          transformations.push('scale(-1 1)');\n          box.top = box.left = 0;\n        }\n      } else if (vFlip) {\n        // Vertical flip\n        transformations.push('translate(' + (0 - box.left) + ' ' + (box.height + box.top) + ')');\n        transformations.push('scale(1 -1)');\n        box.top = box.left = 0;\n      }\n\n      let tempValue;\n\n      if (rotation < 0) {\n        rotation -= Math.floor(rotation / 4) * 4;\n      }\n\n      rotation = rotation % 4;\n\n      switch (rotation) {\n        case 1:\n          // 90deg\n          tempValue = box.height / 2 + box.top;\n          transformations.unshift('rotate(90 ' + tempValue + ' ' + tempValue + ')');\n          break;\n\n        case 2:\n          // 180deg\n          transformations.unshift('rotate(180 ' + (box.width / 2 + box.left) + ' ' + (box.height / 2 + box.top) + ')');\n          break;\n\n        case 3:\n          // 270deg\n          tempValue = box.width / 2 + box.left;\n          transformations.unshift('rotate(-90 ' + tempValue + ' ' + tempValue + ')');\n          break;\n      }\n\n      if (rotation % 2 === 1) {\n        // Swap width/height and x/y for 90deg or 270deg rotation\n        if (box.left !== 0 || box.top !== 0) {\n          tempValue = box.left;\n          box.left = box.top;\n          box.top = tempValue;\n        }\n\n        if (box.width !== box.height) {\n          tempValue = box.width;\n          box.width = box.height;\n          box.height = tempValue;\n        }\n      }\n\n      if (transformations.length) {\n        body = '<g transform=\"' + transformations.join(' ') + '\">' + body + '</g>';\n      }\n    }); // Calculate dimensions\n\n    let width, height;\n\n    if (customisations.width === null && customisations.height === null) {\n      // Set height to '1em', calculate width\n      height = '1em';\n      width = size.calculateSize(height, box.width / box.height);\n    } else if (customisations.width !== null && customisations.height !== null) {\n      // Values are set\n      width = customisations.width;\n      height = customisations.height;\n    } else if (customisations.height !== null) {\n      // Height is set\n      height = customisations.height;\n      width = size.calculateSize(height, box.width / box.height);\n    } else {\n      // Width is set\n      width = customisations.width;\n      height = size.calculateSize(width, box.height / box.width);\n    } // Check for 'auto'\n\n\n    if (width === 'auto') {\n      width = box.width;\n    }\n\n    if (height === 'auto') {\n      height = box.height;\n    } // Convert to string\n\n\n    width = typeof width === 'string' ? width : width + '';\n    height = typeof height === 'string' ? height : height + ''; // Result\n\n    const result = {\n      attributes: {\n        width,\n        height,\n        preserveAspectRatio: preserveAspectRatio(customisations),\n        viewBox: box.left + ' ' + box.top + ' ' + box.width + ' ' + box.height\n      },\n      body\n    };\n\n    if (customisations.inline) {\n      result.inline = true;\n    }\n\n    return result;\n  }\n\n  exports.iconToSVG = iconToSVG;\n});\nvar functions$2 = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.builderFunctions = void 0;\n  /**\n   * Exported builder functions\n   */\n\n  exports.builderFunctions = {\n    replaceIDs: id.replaceIDs,\n    calculateSize: size.calculateSize,\n    buildIcon: (icon$1, customisations$1) => {\n      return build.iconToSVG(icon.fullIcon(icon$1), customisations.mergeCustomisations(customisations.defaults, customisations$1));\n    }\n  };\n});\nvar modules$1 = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.coreModules = void 0;\n  exports.coreModules = {};\n});\nvar config$1 = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.defaultConfig = void 0;\n  /**\n   * Default RedundancyConfig for API calls\n   */\n\n  exports.defaultConfig = {\n    resources: [],\n    index: 0,\n    timeout: 2000,\n    rotate: 750,\n    random: false,\n    dataAfterTimeout: false\n  };\n});\nvar query = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.sendQuery = void 0;\n  /**\n   * Send query\n   */\n\n  function sendQuery(config, payload, query, done, success) {\n    // Get number of resources\n    const resourcesCount = config.resources.length; // Save start index\n\n    const startIndex = config.random ? Math.floor(Math.random() * resourcesCount) : config.index; // Get resources\n\n    let resources;\n\n    if (config.random) {\n      // Randomise array\n      let list = config.resources.slice(0);\n      resources = [];\n\n      while (list.length > 1) {\n        const nextIndex = Math.floor(Math.random() * list.length);\n        resources.push(list[nextIndex]);\n        list = list.slice(0, nextIndex).concat(list.slice(nextIndex + 1));\n      }\n\n      resources = resources.concat(list);\n    } else {\n      // Rearrange resources to start with startIndex\n      resources = config.resources.slice(startIndex).concat(config.resources.slice(0, startIndex));\n    } // Counters, status\n\n\n    const startTime = Date.now();\n    let status = 'pending';\n    let queriesSent = 0;\n    let lastError = void 0; // Timer\n\n    let timer = null; // Execution queue\n\n    let queue = []; // Callbacks to call when query is complete\n\n    let doneCallbacks = [];\n\n    if (typeof done === 'function') {\n      doneCallbacks.push(done);\n    }\n    /**\n     * Reset timer\n     */\n\n\n    function resetTimer() {\n      if (timer) {\n        clearTimeout(timer);\n        timer = null;\n      }\n    }\n    /**\n     * Abort everything\n     */\n\n\n    function abort() {\n      // Change status\n      if (status === 'pending') {\n        status = 'aborted';\n      } // Reset timer\n\n\n      resetTimer(); // Abort all queued items\n\n      queue.forEach(item => {\n        if (item.abort) {\n          item.abort();\n        }\n\n        if (item.status === 'pending') {\n          item.status = 'aborted';\n        }\n      });\n      queue = [];\n    }\n    /**\n     * Add / replace callback to call when execution is complete.\n     * This can be used to abort pending query implementations when query is complete or aborted.\n     */\n\n\n    function subscribe(callback, overwrite) {\n      if (overwrite) {\n        doneCallbacks = [];\n      }\n\n      if (typeof callback === 'function') {\n        doneCallbacks.push(callback);\n      }\n    }\n    /**\n     * Get query status\n     */\n\n\n    function getQueryStatus() {\n      return {\n        startTime,\n        payload,\n        status,\n        queriesSent,\n        queriesPending: queue.length,\n        subscribe,\n        abort\n      };\n    }\n    /**\n     * Fail query\n     */\n\n\n    function failQuery() {\n      status = 'failed'; // Send notice to all callbacks\n\n      doneCallbacks.forEach(callback => {\n        callback(void 0, lastError);\n      });\n    }\n    /**\n     * Clear queue\n     */\n\n\n    function clearQueue() {\n      queue = queue.filter(item => {\n        if (item.status === 'pending') {\n          item.status = 'aborted';\n        }\n\n        if (item.abort) {\n          item.abort();\n        }\n\n        return false;\n      });\n    }\n    /**\n     * Got response from module\n     */\n\n\n    function moduleResponse(item, data, error) {\n      const isError = data === void 0; // Remove item from queue\n\n      queue = queue.filter(queued => queued !== item); // Check status\n\n      switch (status) {\n        case 'pending':\n          // Pending\n          break;\n\n        case 'failed':\n          if (isError || !config.dataAfterTimeout) {\n            // Query has already timed out or dataAfterTimeout is disabled\n            return;\n          } // Success after failure\n\n\n          break;\n\n        default:\n          // Aborted or completed\n          return;\n      } // Error\n\n\n      if (isError) {\n        if (error !== void 0) {\n          lastError = error;\n        }\n\n        if (!queue.length) {\n          if (!resources.length) {\n            // Nothing else queued, nothing can be queued\n            failQuery();\n          } else {\n            // Queue is empty: run next item immediately\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            execNext();\n          }\n        }\n\n        return;\n      } // Reset timers, abort pending queries\n\n\n      resetTimer();\n      clearQueue(); // Update index in Redundancy\n\n      if (success && !config.random) {\n        const index = config.resources.indexOf(item.resource);\n\n        if (index !== -1 && index !== config.index) {\n          success(index);\n        }\n      } // Mark as completed and call callbacks\n\n\n      status = 'completed';\n      doneCallbacks.forEach(callback => {\n        callback(data);\n      });\n    }\n    /**\n     * Execute next query\n     */\n\n\n    function execNext() {\n      // Check status\n      if (status !== 'pending') {\n        return;\n      } // Reset timer\n\n\n      resetTimer(); // Get resource\n\n      const resource = resources.shift();\n\n      if (resource === void 0) {\n        // Nothing to execute: wait for final timeout before failing\n        if (queue.length) {\n          const timeout = typeof config.timeout === 'function' ? config.timeout(startTime) : config.timeout;\n\n          if (timeout) {\n            // Last timeout before failing to allow late response\n            timer = setTimeout(() => {\n              resetTimer();\n\n              if (status === 'pending') {\n                // Clear queue\n                clearQueue();\n                failQuery();\n              }\n            }, timeout);\n            return;\n          }\n        } // Fail\n\n\n        failQuery();\n        return;\n      } // Create new item\n\n\n      const item = {\n        getQueryStatus,\n        status: 'pending',\n        resource,\n        done: (data, error) => {\n          moduleResponse(item, data, error);\n        }\n      }; // Add to queue\n\n      queue.push(item); // Bump next index\n\n      queriesSent++; // Get timeout for next item\n\n      const timeout = typeof config.rotate === 'function' ? config.rotate(queriesSent, startTime) : config.rotate; // Create timer\n\n      timer = setTimeout(execNext, timeout); // Execute it\n\n      query(resource, payload, item);\n    } // Execute first query on next tick\n\n\n    setTimeout(execNext); // Return getQueryStatus()\n\n    return getQueryStatus;\n  }\n\n  exports.sendQuery = sendQuery;\n});\nvar redundancy = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.initRedundancy = void 0;\n  /**\n   * Set configuration\n   */\n\n  function setConfig(config) {\n    if (typeof config !== 'object' || typeof config.resources !== 'object' || !(config.resources instanceof Array) || !config.resources.length) {\n      throw new Error('Invalid Reduncancy configuration');\n    }\n\n    const newConfig = Object.create(null);\n    let key;\n\n    for (key in config$1.defaultConfig) {\n      if (config[key] !== void 0) {\n        newConfig[key] = config[key];\n      } else {\n        newConfig[key] = config$1.defaultConfig[key];\n      }\n    }\n\n    return newConfig;\n  }\n  /**\n   * Redundancy instance\n   */\n\n\n  function initRedundancy(cfg) {\n    // Configuration\n    const config = setConfig(cfg); // List of queries\n\n    let queries = [];\n    /**\n     * Remove aborted and completed queries\n     */\n\n    function cleanup() {\n      queries = queries.filter(item => item().status === 'pending');\n    }\n    /**\n     * Send query\n     */\n\n\n    function query$1(payload, queryCallback, doneCallback) {\n      const query$1 = query.sendQuery(config, payload, queryCallback, (data, error) => {\n        // Remove query from list\n        cleanup(); // Call callback\n\n        if (doneCallback) {\n          doneCallback(data, error);\n        }\n      }, newIndex => {\n        // Update start index\n        config.index = newIndex;\n      });\n      queries.push(query$1);\n      return query$1;\n    }\n    /**\n     * Find instance\n     */\n\n\n    function find(callback) {\n      const result = queries.find(value => {\n        return callback(value);\n      });\n      return result !== void 0 ? result : null;\n    } // Create and return functions\n\n\n    const instance = {\n      query: query$1,\n      find,\n      setIndex: index => {\n        config.index = index;\n      },\n      getIndex: () => config.index,\n      cleanup\n    };\n    return instance;\n  }\n\n  exports.initRedundancy = initRedundancy;\n});\nvar sort = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.sortIcons = void 0;\n  /**\n   * Check if icons have been loaded\n   */\n\n  function sortIcons(icons) {\n    const result = {\n      loaded: [],\n      missing: [],\n      pending: []\n    };\n    const storage = Object.create(null); // Sort icons alphabetically to prevent duplicates and make sure they are sorted in API queries\n\n    icons.sort((a, b) => {\n      if (a.provider !== b.provider) {\n        return a.provider.localeCompare(b.provider);\n      }\n\n      if (a.prefix !== b.prefix) {\n        return a.prefix.localeCompare(b.prefix);\n      }\n\n      return a.name.localeCompare(b.name);\n    });\n    let lastIcon = {\n      provider: '',\n      prefix: '',\n      name: ''\n    };\n    icons.forEach(icon => {\n      if (lastIcon.name === icon.name && lastIcon.prefix === icon.prefix && lastIcon.provider === icon.provider) {\n        return;\n      }\n\n      lastIcon = icon; // Check icon\n\n      const provider = icon.provider;\n      const prefix = icon.prefix;\n      const name = icon.name;\n\n      if (storage[provider] === void 0) {\n        storage[provider] = Object.create(null);\n      }\n\n      const providerStorage = storage[provider];\n\n      if (providerStorage[prefix] === void 0) {\n        providerStorage[prefix] = storage_1.getStorage(provider, prefix);\n      }\n\n      const localStorage = providerStorage[prefix];\n      let list;\n\n      if (localStorage.icons[name] !== void 0) {\n        list = result.loaded;\n      } else if (prefix === '' || localStorage.missing[name] !== void 0) {\n        // Mark icons without prefix as missing because they cannot be loaded from API\n        list = result.missing;\n      } else {\n        list = result.pending;\n      }\n\n      const item = {\n        provider,\n        prefix,\n        name\n      };\n      list.push(item);\n    });\n    return result;\n  }\n\n  exports.sortIcons = sortIcons;\n});\nvar callbacks = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.storeCallback = exports.updateCallbacks = exports.callbacks = void 0; // Records sorted by provider and prefix\n  // This export is only for unit testing, should not be used\n\n  exports.callbacks = Object.create(null);\n  const pendingUpdates = Object.create(null);\n  /**\n   * Remove callback\n   */\n\n  function removeCallback(sources, id) {\n    sources.forEach(source => {\n      const provider = source.provider;\n\n      if (exports.callbacks[provider] === void 0) {\n        return;\n      }\n\n      const providerCallbacks = exports.callbacks[provider];\n      const prefix = source.prefix;\n      const items = providerCallbacks[prefix];\n\n      if (items) {\n        providerCallbacks[prefix] = items.filter(row => row.id !== id);\n      }\n    });\n  }\n  /**\n   * Update all callbacks for provider and prefix\n   */\n\n\n  function updateCallbacks(provider, prefix) {\n    if (pendingUpdates[provider] === void 0) {\n      pendingUpdates[provider] = Object.create(null);\n    }\n\n    const providerPendingUpdates = pendingUpdates[provider];\n\n    if (!providerPendingUpdates[prefix]) {\n      providerPendingUpdates[prefix] = true;\n      setTimeout(() => {\n        providerPendingUpdates[prefix] = false;\n\n        if (exports.callbacks[provider] === void 0 || exports.callbacks[provider][prefix] === void 0) {\n          return;\n        } // Get all items\n\n\n        const items = exports.callbacks[provider][prefix].slice(0);\n\n        if (!items.length) {\n          return;\n        }\n\n        const storage = storage_1.getStorage(provider, prefix); // Check each item for changes\n\n        let hasPending = false;\n        items.forEach(item => {\n          const icons = item.icons;\n          const oldLength = icons.pending.length;\n          icons.pending = icons.pending.filter(icon => {\n            if (icon.prefix !== prefix) {\n              // Checking only current prefix\n              return true;\n            }\n\n            const name = icon.name;\n\n            if (storage.icons[name] !== void 0) {\n              // Loaded\n              icons.loaded.push({\n                provider,\n                prefix,\n                name\n              });\n            } else if (storage.missing[name] !== void 0) {\n              // Missing\n              icons.missing.push({\n                provider,\n                prefix,\n                name\n              });\n            } else {\n              // Pending\n              hasPending = true;\n              return true;\n            }\n\n            return false;\n          }); // Changes detected - call callback\n\n          if (icons.pending.length !== oldLength) {\n            if (!hasPending) {\n              // All icons have been loaded - remove callback from prefix\n              removeCallback([{\n                provider,\n                prefix\n              }], item.id);\n            }\n\n            item.callback(icons.loaded.slice(0), icons.missing.slice(0), icons.pending.slice(0), item.abort);\n          }\n        });\n      });\n    }\n  }\n\n  exports.updateCallbacks = updateCallbacks;\n  /**\n   * Unique id counter for callbacks\n   */\n\n  let idCounter = 0;\n  /**\n   * Add callback\n   */\n\n  function storeCallback(callback, icons, pendingSources) {\n    // Create unique id and abort function\n    const id = idCounter++;\n    const abort = removeCallback.bind(null, pendingSources, id);\n\n    if (!icons.pending.length) {\n      // Do not store item without pending icons and return function that does nothing\n      return abort;\n    } // Create item and store it for all pending prefixes\n\n\n    const item = {\n      id,\n      icons,\n      callback,\n      abort: abort\n    };\n    pendingSources.forEach(source => {\n      const provider = source.provider;\n      const prefix = source.prefix;\n\n      if (exports.callbacks[provider] === void 0) {\n        exports.callbacks[provider] = Object.create(null);\n      }\n\n      const providerCallbacks = exports.callbacks[provider];\n\n      if (providerCallbacks[prefix] === void 0) {\n        providerCallbacks[prefix] = [];\n      }\n\n      providerCallbacks[prefix].push(item);\n    });\n    return abort;\n  }\n\n  exports.storeCallback = storeCallback;\n});\nvar modules = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.getAPIModule = exports.setAPIModule = void 0;\n  /**\n   * Local storate types and entries\n   */\n\n  const storage = Object.create(null);\n  /**\n   * Set API module\n   */\n\n  function setAPIModule(provider, item) {\n    storage[provider] = item;\n  }\n\n  exports.setAPIModule = setAPIModule;\n  /**\n   * Get API module\n   */\n\n  function getAPIModule(provider) {\n    return storage[provider] === void 0 ? storage[''] : storage[provider];\n  }\n\n  exports.getAPIModule = getAPIModule;\n});\nvar config = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.getAPIConfig = exports.setAPIConfig = void 0;\n  /**\n   * Create full API configuration from partial data\n   */\n\n  function createConfig(source) {\n    let resources;\n\n    if (typeof source.resources === 'string') {\n      resources = [source.resources];\n    } else {\n      resources = source.resources;\n\n      if (!(resources instanceof Array) || !resources.length) {\n        return null;\n      }\n    }\n\n    const result = {\n      // API hosts\n      resources: resources,\n      // Root path\n      path: source.path === void 0 ? '/' : source.path,\n      // URL length limit\n      maxURL: source.maxURL ? source.maxURL : 500,\n      // Timeout before next host is used.\n      rotate: source.rotate ? source.rotate : 750,\n      // Timeout before failing query.\n      timeout: source.timeout ? source.timeout : 5000,\n      // Randomise default API end point.\n      random: source.random === true,\n      // Start index\n      index: source.index ? source.index : 0,\n      // Receive data after time out (used if time out kicks in first, then API module sends data anyway).\n      dataAfterTimeout: source.dataAfterTimeout !== false\n    };\n    return result;\n  }\n  /**\n   * Local storage\n   */\n\n\n  const configStorage = Object.create(null);\n  /**\n   * Redundancy for API servers.\n   *\n   * API should have very high uptime because of implemented redundancy at server level, but\n   * sometimes bad things happen. On internet 100% uptime is not possible.\n   *\n   * There could be routing problems. Server might go down for whatever reason, but it takes\n   * few minutes to detect that downtime, so during those few minutes API might not be accessible.\n   *\n   * This script has some redundancy to mitigate possible network issues.\n   *\n   * If one host cannot be reached in 'rotate' (750 by default) ms, script will try to retrieve\n   * data from different host. Hosts have different configurations, pointing to different\n   * API servers hosted at different providers.\n   */\n\n  const fallBackAPISources = ['https://api.simplesvg.com', 'https://api.unisvg.com']; // Shuffle fallback API\n\n  const fallBackAPI = [];\n\n  while (fallBackAPISources.length > 0) {\n    if (fallBackAPISources.length === 1) {\n      fallBackAPI.push(fallBackAPISources.shift());\n    } else {\n      // Get first or last item\n      if (Math.random() > 0.5) {\n        fallBackAPI.push(fallBackAPISources.shift());\n      } else {\n        fallBackAPI.push(fallBackAPISources.pop());\n      }\n    }\n  } // Add default API\n\n\n  configStorage[''] = createConfig({\n    resources: ['https://api.iconify.design'].concat(fallBackAPI)\n  });\n  /**\n   * Add custom config for provider\n   */\n\n  function setAPIConfig(provider, customConfig) {\n    const config = createConfig(customConfig);\n\n    if (config === null) {\n      return false;\n    }\n\n    configStorage[provider] = config;\n    return true;\n  }\n\n  exports.setAPIConfig = setAPIConfig;\n  /**\n   * Get API configuration\n   */\n\n  const getAPIConfig = provider => configStorage[provider];\n\n  exports.getAPIConfig = getAPIConfig;\n});\nvar list = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.getProviders = exports.listToIcons = void 0;\n  /**\n   * Convert icons list from string/icon mix to icons and validate them\n   */\n\n  function listToIcons(list, validate = true, simpleNames = false) {\n    const result = [];\n    list.forEach(item => {\n      const icon = typeof item === 'string' ? name.stringToIcon(item, false, simpleNames) : item;\n\n      if (!validate || name.validateIcon(icon, simpleNames)) {\n        result.push({\n          provider: icon.provider,\n          prefix: icon.prefix,\n          name: icon.name\n        });\n      }\n    });\n    return result;\n  }\n\n  exports.listToIcons = listToIcons;\n  /**\n   * Get all providers\n   */\n\n  function getProviders(list) {\n    const providers = Object.create(null);\n    list.forEach(icon => {\n      providers[icon.provider] = true;\n    });\n    return Object.keys(providers);\n  }\n\n  exports.getProviders = getProviders;\n});\nvar api = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.API = exports.getRedundancyCache = void 0; // Empty abort callback for loadIcons()\n\n  function emptyCallback() {// Do nothing\n  }\n\n  const pendingIcons = Object.create(null);\n  /**\n   * List of icons that are waiting to be loaded.\n   *\n   * List is passed to API module, then cleared.\n   *\n   * This list should not be used for any checks, use pendingIcons to check\n   * if icons is being loaded.\n   *\n   * [provider][prefix] = array of icon names\n   */\n\n  const iconsToLoad = Object.create(null); // Flags to merge multiple synchronous icon requests in one asynchronous request\n\n  const loaderFlags = Object.create(null);\n  const queueFlags = Object.create(null);\n  const redundancyCache = Object.create(null);\n  /**\n   * Get Redundancy instance for provider\n   */\n\n  function getRedundancyCache(provider) {\n    if (redundancyCache[provider] === void 0) {\n      const config$1 = config.getAPIConfig(provider);\n\n      if (!config$1) {\n        // No way to load icons because configuration is not set!\n        return;\n      }\n\n      const redundancy$1 = redundancy.initRedundancy(config$1);\n      const cachedReundancy = {\n        config: config$1,\n        redundancy: redundancy$1\n      };\n      redundancyCache[provider] = cachedReundancy;\n    }\n\n    return redundancyCache[provider];\n  }\n\n  exports.getRedundancyCache = getRedundancyCache;\n  /**\n   * Function called when new icons have been loaded\n   */\n\n  function loadedNewIcons(provider, prefix) {\n    // Run only once per tick, possibly joining multiple API responses in one call\n    if (loaderFlags[provider] === void 0) {\n      loaderFlags[provider] = Object.create(null);\n    }\n\n    const providerLoaderFlags = loaderFlags[provider];\n\n    if (!providerLoaderFlags[prefix]) {\n      providerLoaderFlags[prefix] = true;\n      setTimeout(() => {\n        providerLoaderFlags[prefix] = false;\n        callbacks.updateCallbacks(provider, prefix);\n      });\n    }\n  } // Storage for errors for loadNewIcons(). Used to avoid spamming log with identical errors.\n\n\n  const errorsCache = Object.create(null);\n  /**\n   * Load icons\n   */\n\n  function loadNewIcons(provider, prefix, icons) {\n    function err() {\n      const key = (provider === '' ? '' : '@' + provider + ':') + prefix;\n      const time = Math.floor(Date.now() / 60000); // log once in a minute\n\n      if (errorsCache[key] < time) {\n        errorsCache[key] = time;\n        console.error('Unable to retrieve icons for \"' + key + '\" because API is not configured properly.');\n      }\n    } // Create nested objects if needed\n\n\n    if (iconsToLoad[provider] === void 0) {\n      iconsToLoad[provider] = Object.create(null);\n    }\n\n    const providerIconsToLoad = iconsToLoad[provider];\n\n    if (queueFlags[provider] === void 0) {\n      queueFlags[provider] = Object.create(null);\n    }\n\n    const providerQueueFlags = queueFlags[provider];\n\n    if (pendingIcons[provider] === void 0) {\n      pendingIcons[provider] = Object.create(null);\n    }\n\n    const providerPendingIcons = pendingIcons[provider]; // Add icons to queue\n\n    if (providerIconsToLoad[prefix] === void 0) {\n      providerIconsToLoad[prefix] = icons;\n    } else {\n      providerIconsToLoad[prefix] = providerIconsToLoad[prefix].concat(icons).sort();\n    } // Redundancy item\n\n\n    let cachedReundancy; // Trigger update on next tick, mering multiple synchronous requests into one asynchronous request\n\n    if (!providerQueueFlags[prefix]) {\n      providerQueueFlags[prefix] = true;\n      setTimeout(() => {\n        providerQueueFlags[prefix] = false; // Get icons and delete queue\n\n        const icons = providerIconsToLoad[prefix];\n        delete providerIconsToLoad[prefix]; // Get API module\n\n        const api = modules.getAPIModule(provider);\n\n        if (!api) {\n          // No way to load icons!\n          err();\n          return;\n        } // Get API config and Redundancy instance\n\n\n        if (cachedReundancy === void 0) {\n          const redundancy = getRedundancyCache(provider);\n\n          if (redundancy === void 0) {\n            // No way to load icons because configuration is not set!\n            err();\n            return;\n          }\n\n          cachedReundancy = redundancy;\n        } // Prepare parameters and run queries\n\n\n        const params = api.prepare(provider, prefix, icons);\n        params.forEach(item => {\n          cachedReundancy.redundancy.query(item, api.send, (data, error) => {\n            const storage = storage_1.getStorage(provider, prefix); // Check for error\n\n            if (typeof data !== 'object') {\n              if (error !== 404) {\n                // Do not handle error unless it is 404\n                return;\n              } // Not found: mark as missing\n\n\n              const t = Date.now();\n              item.icons.forEach(name => {\n                storage.missing[name] = t;\n              });\n            } else {\n              // Add icons to storage\n              try {\n                const added = storage_1.addIconSet(storage, data, 'all');\n\n                if (typeof added === 'boolean') {\n                  return;\n                } // Remove added icons from pending list\n\n\n                const pending = providerPendingIcons[prefix];\n                added.forEach(name => {\n                  delete pending[name];\n                }); // Cache API response\n\n                if (modules$1.coreModules.cache) {\n                  modules$1.coreModules.cache(provider, data);\n                }\n              } catch (err) {\n                console.error(err);\n              }\n            } // Trigger update on next tick\n\n\n            loadedNewIcons(provider, prefix);\n          });\n        });\n      });\n    }\n  }\n  /**\n   * Check if icon is being loaded\n   */\n\n\n  const isPending = icon => {\n    return pendingIcons[icon.provider] !== void 0 && pendingIcons[icon.provider][icon.prefix] !== void 0 && pendingIcons[icon.provider][icon.prefix][icon.name] !== void 0;\n  };\n  /**\n   * Load icons\n   */\n\n\n  const loadIcons = (icons, callback) => {\n    // Clean up and copy icons list\n    const cleanedIcons = list.listToIcons(icons, true, functions$3.allowSimpleNames()); // Sort icons by missing/loaded/pending\n    // Pending means icon is either being requsted or is about to be requested\n\n    const sortedIcons = sort.sortIcons(cleanedIcons);\n\n    if (!sortedIcons.pending.length) {\n      // Nothing to load\n      let callCallback = true;\n\n      if (callback) {\n        setTimeout(() => {\n          if (callCallback) {\n            callback(sortedIcons.loaded, sortedIcons.missing, sortedIcons.pending, emptyCallback);\n          }\n        });\n      }\n\n      return () => {\n        callCallback = false;\n      };\n    } // Get all sources for pending icons\n\n\n    const newIcons = Object.create(null);\n    const sources = [];\n    let lastProvider, lastPrefix;\n    sortedIcons.pending.forEach(icon => {\n      const provider = icon.provider;\n      const prefix = icon.prefix;\n\n      if (prefix === lastPrefix && provider === lastProvider) {\n        return;\n      }\n\n      lastProvider = provider;\n      lastPrefix = prefix;\n      sources.push({\n        provider,\n        prefix\n      });\n\n      if (pendingIcons[provider] === void 0) {\n        pendingIcons[provider] = Object.create(null);\n      }\n\n      const providerPendingIcons = pendingIcons[provider];\n\n      if (providerPendingIcons[prefix] === void 0) {\n        providerPendingIcons[prefix] = Object.create(null);\n      }\n\n      if (newIcons[provider] === void 0) {\n        newIcons[provider] = Object.create(null);\n      }\n\n      const providerNewIcons = newIcons[provider];\n\n      if (providerNewIcons[prefix] === void 0) {\n        providerNewIcons[prefix] = [];\n      }\n    }); // List of new icons\n\n    const time = Date.now(); // Filter pending icons list: find icons that are not being loaded yet\n    // If icon was called before, it must exist in pendingIcons or storage, but because this\n    // function is called right after sortIcons() that checks storage, icon is definitely not in storage.\n\n    sortedIcons.pending.forEach(icon => {\n      const provider = icon.provider;\n      const prefix = icon.prefix;\n      const name = icon.name;\n      const pendingQueue = pendingIcons[provider][prefix];\n\n      if (pendingQueue[name] === void 0) {\n        // New icon - add to pending queue to mark it as being loaded\n        pendingQueue[name] = time; // Add it to new icons list to pass it to API module for loading\n\n        newIcons[provider][prefix].push(name);\n      }\n    }); // Load icons on next tick to make sure result is not returned before callback is stored and\n    // to consolidate multiple synchronous loadIcons() calls into one asynchronous API call\n\n    sources.forEach(source => {\n      const provider = source.provider;\n      const prefix = source.prefix;\n\n      if (newIcons[provider][prefix].length) {\n        loadNewIcons(provider, prefix, newIcons[provider][prefix]);\n      }\n    }); // Store callback and return abort function\n\n    return callback ? callbacks.storeCallback(callback, sortedIcons, sources) : emptyCallback;\n  };\n  /**\n   * Export module\n   */\n\n\n  exports.API = {\n    isPending,\n    loadIcons\n  };\n});\nvar functions$1 = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.APIInternalFunctions = exports.APIFunctions = void 0;\n  exports.APIFunctions = {\n    loadIcons: api.API.loadIcons,\n    addAPIProvider: config.setAPIConfig\n  };\n  exports.APIInternalFunctions = {\n    getAPI: api.getRedundancyCache,\n    getAPIConfig: config.getAPIConfig,\n    setAPIModule: modules.setAPIModule\n  };\n});\nvar jsonp = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.getAPIModule = void 0;\n  let rootVar = null;\n  /**\n   * Endpoint\n   */\n\n  let endPoint = '{prefix}.js?icons={icons}&callback={callback}';\n  /**\n   * Cache: provider:prefix = value\n   */\n\n  const maxLengthCache = Object.create(null);\n  const pathCache = Object.create(null);\n  /**\n   * Get hash for query\n   *\n   * Hash is used in JSONP callback name, so same queries end up with same JSONP callback,\n   * allowing response to be cached in browser.\n   */\n\n  function hash(str) {\n    let total = 0,\n        i;\n\n    for (i = str.length - 1; i >= 0; i--) {\n      total += str.charCodeAt(i);\n    }\n\n    return total % 999;\n  }\n  /**\n   * Get root object\n   */\n\n\n  function getGlobal() {\n    // Create root\n    if (rootVar === null) {\n      // window\n      const globalRoot = self; // Test for window.Iconify. If missing, create 'IconifyJSONP'\n\n      let prefix = 'Iconify';\n      let extraPrefix = '.cb';\n\n      if (globalRoot[prefix] === void 0) {\n        // Use 'IconifyJSONP' global\n        prefix = 'IconifyJSONP';\n        extraPrefix = '';\n\n        if (globalRoot[prefix] === void 0) {\n          globalRoot[prefix] = Object.create(null);\n        }\n\n        rootVar = globalRoot[prefix];\n      } else {\n        // Use 'Iconify.cb'\n        const iconifyRoot = globalRoot[prefix];\n\n        if (iconifyRoot.cb === void 0) {\n          iconifyRoot.cb = Object.create(null);\n        }\n\n        rootVar = iconifyRoot.cb;\n      } // Change end point\n\n\n      endPoint = endPoint.replace('{callback}', prefix + extraPrefix + '.{cb}');\n    }\n\n    return rootVar;\n  }\n  /**\n   * Return API module\n   */\n\n\n  const getAPIModule = getAPIConfig => {\n    /**\n     * Calculate maximum icons list length for prefix\n     */\n    function calculateMaxLength(provider, prefix) {\n      // Get config and store path\n      const config = getAPIConfig(provider);\n\n      if (!config) {\n        return 0;\n      } // Calculate\n\n\n      let result;\n\n      if (!config.maxURL) {\n        result = 0;\n      } else {\n        let maxHostLength = 0;\n        config.resources.forEach(item => {\n          const host = item;\n          maxHostLength = Math.max(maxHostLength, host.length);\n        }); // Make sure global is set\n\n        getGlobal(); // Extra width: prefix (3) + counter (4) - '{cb}' (4)\n\n        const extraLength = 3; // Get available length\n\n        result = config.maxURL - maxHostLength - config.path.length - endPoint.replace('{provider}', provider).replace('{prefix}', prefix).replace('{icons}', '').length - extraLength;\n      } // Cache stuff and return result\n\n\n      const cacheKey = provider + ':' + prefix;\n      pathCache[cacheKey] = config.path;\n      maxLengthCache[cacheKey] = result;\n      return result;\n    }\n    /**\n     * Prepare params\n     */\n\n\n    const prepare = (provider, prefix, icons) => {\n      const results = []; // Get maximum icons list length\n\n      const cacheKey = provider + ':' + prefix;\n      let maxLength = maxLengthCache[cacheKey];\n\n      if (maxLength === void 0) {\n        maxLength = calculateMaxLength(provider, prefix);\n      } // Split icons\n\n\n      let item = {\n        provider,\n        prefix,\n        icons: []\n      };\n      let length = 0;\n      icons.forEach((name, index) => {\n        length += name.length + 1;\n\n        if (length >= maxLength && index > 0) {\n          // Next set\n          results.push(item);\n          item = {\n            provider,\n            prefix,\n            icons: []\n          };\n          length = name.length;\n        }\n\n        item.icons.push(name);\n      });\n      results.push(item);\n      return results;\n    };\n    /**\n     * Load icons\n     */\n\n\n    const send = (host, params, status) => {\n      const provider = params.provider;\n      const prefix = params.prefix;\n      const icons = params.icons;\n      const iconsList = icons.join(',');\n      const cacheKey = provider + ':' + prefix; // Create callback prefix\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\n      const cbPrefix = prefix.split('-').shift().slice(0, 3);\n      const global = getGlobal(); // Callback hash\n\n      let cbCounter = hash(provider + ':' + host + ':' + prefix + ':' + iconsList);\n\n      while (global[cbPrefix + cbCounter] !== void 0) {\n        cbCounter++;\n      }\n\n      const callbackName = cbPrefix + cbCounter;\n      const path = pathCache[cacheKey] + endPoint.replace('{provider}', provider).replace('{prefix}', prefix).replace('{icons}', iconsList).replace('{cb}', callbackName);\n\n      global[callbackName] = data => {\n        // Remove callback and complete query\n        delete global[callbackName];\n        status.done(data);\n      }; // Create URI\n\n\n      const uri = host + path; // console.log('API query:', uri);\n      // Create script and append it to head\n\n      const script = document.createElement('script');\n      script.type = 'text/javascript';\n      script.async = true;\n      script.src = uri;\n      document.head.appendChild(script);\n    }; // Return functions\n\n\n    return {\n      prepare,\n      send\n    };\n  };\n\n  exports.getAPIModule = getAPIModule;\n});\nvar fetch_1 = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.getAPIModule = exports.setFetch = void 0;\n  /**\n   * Endpoint\n   */\n\n  const endPoint = '{prefix}.json?icons={icons}';\n  /**\n   * Cache\n   */\n\n  const maxLengthCache = Object.create(null);\n  const pathCache = Object.create(null);\n  /**\n   * Fetch function\n   *\n   * Use this to set 'cross-fetch' in node.js environment if you are retrieving icons on server side.\n   * Not needed when using stuff like Next.js or SvelteKit because components use API only on client side.\n   */\n\n  let fetchModule = null;\n\n  try {\n    fetchModule = fetch;\n  } catch (err) {//\n  }\n\n  function setFetch(fetch) {\n    fetchModule = fetch;\n  }\n\n  exports.setFetch = setFetch;\n  /**\n   * Return API module\n   */\n\n  const getAPIModule = getAPIConfig => {\n    /**\n     * Calculate maximum icons list length for prefix\n     */\n    function calculateMaxLength(provider, prefix) {\n      // Get config and store path\n      const config = getAPIConfig(provider);\n\n      if (!config) {\n        return 0;\n      } // Calculate\n\n\n      let result;\n\n      if (!config.maxURL) {\n        result = 0;\n      } else {\n        let maxHostLength = 0;\n        config.resources.forEach(item => {\n          const host = item;\n          maxHostLength = Math.max(maxHostLength, host.length);\n        }); // Get available length\n\n        result = config.maxURL - maxHostLength - config.path.length - endPoint.replace('{provider}', provider).replace('{prefix}', prefix).replace('{icons}', '').length;\n      } // Cache stuff and return result\n\n\n      const cacheKey = provider + ':' + prefix;\n      pathCache[cacheKey] = config.path;\n      maxLengthCache[cacheKey] = result;\n      return result;\n    }\n    /**\n     * Prepare params\n     */\n\n\n    const prepare = (provider, prefix, icons) => {\n      const results = []; // Get maximum icons list length\n\n      let maxLength = maxLengthCache[prefix];\n\n      if (maxLength === void 0) {\n        maxLength = calculateMaxLength(provider, prefix);\n      } // Split icons\n\n\n      let item = {\n        provider,\n        prefix,\n        icons: []\n      };\n      let length = 0;\n      icons.forEach((name, index) => {\n        length += name.length + 1;\n\n        if (length >= maxLength && index > 0) {\n          // Next set\n          results.push(item);\n          item = {\n            provider,\n            prefix,\n            icons: []\n          };\n          length = name.length;\n        }\n\n        item.icons.push(name);\n      });\n      results.push(item);\n      return results;\n    };\n    /**\n     * Load icons\n     */\n\n\n    const send = (host, params, status) => {\n      const provider = params.provider;\n      const prefix = params.prefix;\n      const icons = params.icons;\n      const iconsList = icons.join(',');\n      const cacheKey = provider + ':' + prefix;\n      const path = pathCache[cacheKey] + endPoint.replace('{provider}', provider).replace('{prefix}', prefix).replace('{icons}', iconsList);\n\n      if (!fetchModule) {\n        // Fail: return 424 Failed Dependency (its not meant to be used like that, but it is the best match)\n        status.done(void 0, 424);\n        return;\n      } // console.log('API query:', host + path);\n\n\n      fetchModule(host + path).then(response => {\n        if (response.status !== 200) {\n          status.done(void 0, response.status);\n          return;\n        }\n\n        return response.json();\n      }).then(data => {\n        if (typeof data !== 'object' || data === null) {\n          return;\n        } // Store cache and complete\n\n\n        status.done(data);\n      }).catch(err => {\n        // Error\n        status.done(void 0, err.errno);\n      });\n    }; // Return functions\n\n\n    return {\n      prepare,\n      send\n    };\n  };\n\n  exports.getAPIModule = getAPIModule;\n});\nvar browserStorage = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.storeCache = exports.loadCache = exports.mock = exports.emptyList = exports.count = exports.config = void 0; // After changing configuration change it in tests/*/fake_cache.ts\n  // Cache version. Bump when structure changes\n\n  const cacheVersion = 'iconify2'; // Cache keys\n\n  const cachePrefix = 'iconify';\n  const countKey = cachePrefix + '-count';\n  const versionKey = cachePrefix + '-version';\n  /**\n   * Cache expiration\n   */\n\n  const hour = 3600000;\n  const cacheExpiration = 168; // In hours\n\n  /**\n   * Storage configuration\n   */\n\n  exports.config = {\n    local: true,\n    session: true\n  };\n  /**\n   * Flag to check if storage has been loaded\n   */\n\n  let loaded = false;\n  /**\n   * Items counter\n   */\n\n  exports.count = {\n    local: 0,\n    session: 0\n  };\n  /**\n   * List of empty items\n   */\n\n  exports.emptyList = {\n    local: [],\n    session: []\n  };\n\n  let _window = typeof window === 'undefined' ? {} : window;\n\n  function mock(fakeWindow) {\n    loaded = false;\n    _window = fakeWindow;\n  }\n\n  exports.mock = mock;\n  /**\n   * Get global\n   *\n   * @param key\n   */\n\n  function getGlobal(key) {\n    const attr = key + 'Storage';\n\n    try {\n      if (_window && _window[attr] && typeof _window[attr].length === 'number') {\n        return _window[attr];\n      }\n    } catch (err) {//\n    } // Failed - mark as disabled\n\n\n    exports.config[key] = false;\n    return null;\n  }\n  /**\n   * Change current count for storage\n   */\n\n\n  function setCount(storage, key, value) {\n    try {\n      storage.setItem(countKey, value + '');\n      exports.count[key] = value;\n      return true;\n    } catch (err) {\n      return false;\n    }\n  }\n  /**\n   * Get current count from storage\n   *\n   * @param storage\n   */\n\n\n  function getCount(storage) {\n    const count = storage.getItem(countKey);\n\n    if (count) {\n      const total = parseInt(count);\n      return total ? total : 0;\n    }\n\n    return 0;\n  }\n  /**\n   * Initialize storage\n   *\n   * @param storage\n   * @param key\n   */\n\n\n  function initCache(storage, key) {\n    try {\n      storage.setItem(versionKey, cacheVersion);\n    } catch (err) {//\n    }\n\n    setCount(storage, key, 0);\n  }\n  /**\n   * Destroy old cache\n   *\n   * @param storage\n   */\n\n\n  function destroyCache(storage) {\n    try {\n      const total = getCount(storage);\n\n      for (let i = 0; i < total; i++) {\n        storage.removeItem(cachePrefix + i);\n      }\n    } catch (err) {//\n    }\n  }\n  /**\n   * Load icons from cache\n   */\n\n\n  const loadCache = () => {\n    if (loaded) {\n      return;\n    }\n\n    loaded = true; // Minimum time\n\n    const minTime = Math.floor(Date.now() / hour) - cacheExpiration; // Load data from storage\n\n    function load(key) {\n      const func = getGlobal(key);\n\n      if (!func) {\n        return;\n      } // Get one item from storage\n\n\n      const getItem = index => {\n        const name = cachePrefix + index;\n        const item = func.getItem(name);\n\n        if (typeof item !== 'string') {\n          // Does not exist\n          return false;\n        } // Get item, validate it\n\n\n        let valid = true;\n\n        try {\n          // Parse, check time stamp\n          const data = JSON.parse(item);\n\n          if (typeof data !== 'object' || typeof data.cached !== 'number' || data.cached < minTime || typeof data.provider !== 'string' || typeof data.data !== 'object' || typeof data.data.prefix !== 'string') {\n            valid = false;\n          } else {\n            // Add icon set\n            const provider = data.provider;\n            const prefix = data.data.prefix;\n            const storage = storage_1.getStorage(provider, prefix);\n            valid = storage_1.addIconSet(storage, data.data);\n          }\n        } catch (err) {\n          valid = false;\n        }\n\n        if (!valid) {\n          func.removeItem(name);\n        }\n\n        return valid;\n      };\n\n      try {\n        // Get version\n        const version = func.getItem(versionKey);\n\n        if (version !== cacheVersion) {\n          if (version) {\n            // Version is set, but invalid - remove old entries\n            destroyCache(func);\n          } // Empty data\n\n\n          initCache(func, key);\n          return;\n        } // Get number of stored items\n\n\n        let total = getCount(func);\n\n        for (let i = total - 1; i >= 0; i--) {\n          if (!getItem(i)) {\n            // Remove item\n            if (i === total - 1) {\n              // Last item - reduce country\n              total--;\n            } else {\n              // Mark as empty\n              exports.emptyList[key].push(i);\n            }\n          }\n        } // Update total\n\n\n        setCount(func, key, total);\n      } catch (err) {//\n      }\n    }\n\n    for (const key in exports.config) {\n      load(key);\n    }\n  };\n\n  exports.loadCache = loadCache;\n  /**\n   * Function to cache icons\n   */\n\n  const storeCache = (provider, data) => {\n    if (!loaded) {\n      exports.loadCache();\n    }\n\n    function store(key) {\n      if (!exports.config[key]) {\n        return false;\n      }\n\n      const func = getGlobal(key);\n\n      if (!func) {\n        return false;\n      } // Get item index\n\n\n      let index = exports.emptyList[key].shift();\n\n      if (index === void 0) {\n        // Create new index\n        index = exports.count[key];\n\n        if (!setCount(func, key, index + 1)) {\n          return false;\n        }\n      } // Create and save item\n\n\n      try {\n        const item = {\n          cached: Math.floor(Date.now() / hour),\n          provider,\n          data\n        };\n        func.setItem(cachePrefix + index, JSON.stringify(item));\n      } catch (err) {\n        return false;\n      }\n\n      return true;\n    } // Attempt to store at localStorage first, then at sessionStorage\n\n\n    if (!store('local')) {\n      store('session');\n    }\n  };\n\n  exports.storeCache = storeCache;\n});\nvar functions = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.toggleBrowserCache = void 0;\n  /**\n   * Toggle cache\n   */\n\n  function toggleBrowserCache(storage, value) {\n    switch (storage) {\n      case 'local':\n      case 'session':\n        browserStorage.config[storage] = value;\n        break;\n\n      case 'all':\n        for (const key in browserStorage.config) {\n          browserStorage.config[key] = value;\n        }\n\n        break;\n    }\n  }\n\n  exports.toggleBrowserCache = toggleBrowserCache;\n});\nvar shorthand = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.alignmentFromString = exports.flipFromString = void 0;\n  const separator = /[\\s,]+/;\n  /**\n   * Apply \"flip\" string to icon customisations\n   */\n\n  function flipFromString(custom, flip) {\n    flip.split(separator).forEach(str => {\n      const value = str.trim();\n\n      switch (value) {\n        case 'horizontal':\n          custom.hFlip = true;\n          break;\n\n        case 'vertical':\n          custom.vFlip = true;\n          break;\n      }\n    });\n  }\n\n  exports.flipFromString = flipFromString;\n  /**\n   * Apply \"align\" string to icon customisations\n   */\n\n  function alignmentFromString(custom, align) {\n    align.split(separator).forEach(str => {\n      const value = str.trim();\n\n      switch (value) {\n        case 'left':\n        case 'center':\n        case 'right':\n          custom.hAlign = value;\n          break;\n\n        case 'top':\n        case 'middle':\n        case 'bottom':\n          custom.vAlign = value;\n          break;\n\n        case 'slice':\n        case 'crop':\n          custom.slice = true;\n          break;\n\n        case 'meet':\n          custom.slice = false;\n      }\n    });\n  }\n\n  exports.alignmentFromString = alignmentFromString;\n});\nvar rotate = createCommonjsModule(function (module, exports) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.rotateFromString = void 0;\n  /**\n   * Get rotation value\n   */\n\n  function rotateFromString(value) {\n    const units = value.replace(/^-?[0-9.]*/, '');\n\n    function cleanup(value) {\n      while (value < 0) {\n        value += 4;\n      }\n\n      return value % 4;\n    }\n\n    if (units === '') {\n      const num = parseInt(value);\n      return isNaN(num) ? 0 : cleanup(num);\n    } else if (units !== value) {\n      let split = 0;\n\n      switch (units) {\n        case '%':\n          // 25% -> 1, 50% -> 2, ...\n          split = 25;\n          break;\n\n        case 'deg':\n          // 90deg -> 1, 180deg -> 2, ...\n          split = 90;\n      }\n\n      if (split) {\n        let num = parseFloat(value.slice(0, value.length - units.length));\n\n        if (isNaN(num)) {\n          return 0;\n        }\n\n        num = num / split;\n        return num % 1 === 0 ? cleanup(num) : 0;\n      }\n    }\n\n    return 0;\n  }\n\n  exports.rotateFromString = rotateFromString;\n});\n/**\n * Default SVG attributes\n */\n\nconst svgDefaults = {\n  'xmlns': 'http://www.w3.org/2000/svg',\n  'xmlnsXlink': 'http://www.w3.org/1999/xlink',\n  'aria-hidden': true,\n  'role': 'img',\n  'style': {} // Include style if it isn't set to add verticalAlign later\n\n};\n/**\n * Default values for customisations for inline icon\n */\n\nconst inlineDefaults = { ...customisations.defaults,\n  inline: true\n};\n/**\n * Render icon\n */\n\nconst render = ( // Icon must be validated before calling this function\nicon, // Partial properties\nprops, // True if icon should have vertical-align added\ninline, // Optional reference for SVG, extracted by React.forwardRef()\nref) => {\n  // Get default properties\n  const defaultProps = inline ? inlineDefaults : customisations.defaults; // Get all customisations\n\n  const customisations$1 = customisations.mergeCustomisations(defaultProps, props); // Create style\n\n  const style = typeof props.style === 'object' && props.style !== null ? props.style : {}; // Create SVG component properties\n\n  const componentProps = { ...svgDefaults,\n    ref,\n    style\n  }; // Get element properties\n\n  for (let key in props) {\n    const value = props[key];\n\n    if (value === void 0) {\n      continue;\n    }\n\n    switch (key) {\n      // Properties to ignore\n      case 'icon':\n      case 'style':\n      case 'children':\n      case 'onLoad':\n      case '_ref':\n      case '_inline':\n        break;\n      // Boolean attributes\n\n      case 'inline':\n      case 'hFlip':\n      case 'vFlip':\n        customisations$1[key] = value === true || value === 'true' || value === 1;\n        break;\n      // Flip as string: 'horizontal,vertical'\n\n      case 'flip':\n        if (typeof value === 'string') {\n          shorthand.flipFromString(customisations$1, value);\n        }\n\n        break;\n      // Alignment as string\n\n      case 'align':\n        if (typeof value === 'string') {\n          shorthand.alignmentFromString(customisations$1, value);\n        }\n\n        break;\n      // Color: copy to style\n\n      case 'color':\n        style.color = value;\n        break;\n      // Rotation as string\n\n      case 'rotate':\n        if (typeof value === 'string') {\n          customisations$1[key] = rotate.rotateFromString(value);\n        } else if (typeof value === 'number') {\n          customisations$1[key] = value;\n        }\n\n        break;\n      // Remove aria-hidden\n\n      case 'ariaHidden':\n      case 'aria-hidden':\n        if (value !== true && value !== 'true') {\n          delete componentProps['aria-hidden'];\n        }\n\n        break;\n      // Copy missing property if it does not exist in customisations\n\n      default:\n        if (defaultProps[key] === void 0) {\n          componentProps[key] = value;\n        }\n\n    }\n  } // Generate icon\n\n\n  const item = build.iconToSVG(icon, customisations$1); // Counter for ids based on \"id\" property to render icons consistently on server and client\n\n  let localCounter = 0;\n  const id$1 = props.id; // Add icon stuff\n\n  componentProps.dangerouslySetInnerHTML = {\n    __html: id.replaceIDs(item.body, id$1 ? () => id$1 + '-' + localCounter++ : 'iconify-react-')\n  };\n\n  for (let key in item.attributes) {\n    componentProps[key] = item.attributes[key];\n  }\n\n  if (item.inline && style.verticalAlign === void 0) {\n    style.verticalAlign = '-0.125em';\n  }\n\n  return React.createElement('svg', componentProps);\n};\n/**\n * Enable and disable browser cache\n */\n\n\nconst enableCache = storage => functions.toggleBrowserCache(storage, true);\n\nconst disableCache = storage => functions.toggleBrowserCache(storage, false);\n/* Storage functions */\n\n/**\n * Check if icon exists\n */\n\n\nconst iconExists = functions$3.storageFunctions.iconExists;\n/**\n * Get icon data\n */\n\nconst getIcon = functions$3.storageFunctions.getIcon;\n/**\n * List available icons\n */\n\nconst listIcons = functions$3.storageFunctions.listIcons;\n/**\n * Add one icon\n */\n\nconst addIcon = functions$3.storageFunctions.addIcon;\n/**\n * Add icon set\n */\n\nconst addCollection = functions$3.storageFunctions.addCollection;\n/* Builder functions */\n\n/**\n * Calculate icon size\n */\n\nconst calculateSize = functions$2.builderFunctions.calculateSize;\n/**\n * Replace unique ids in content\n */\n\nconst replaceIDs = functions$2.builderFunctions.replaceIDs;\n/**\n * Build SVG\n */\n\nconst buildIcon = functions$2.builderFunctions.buildIcon;\n/* API functions */\n\n/**\n * Load icons\n */\n\nconst loadIcons = functions$1.APIFunctions.loadIcons;\n/**\n * Add API provider\n */\n\nconst addAPIProvider = functions$1.APIFunctions.addAPIProvider;\n/**\n * Export internal functions that can be used by third party implementations\n */\n\nconst _api = functions$1.APIInternalFunctions;\n/**\n * Initialise stuff\n */\n// Enable short names\n\nfunctions$3.allowSimpleNames(true); // Set API\n\nmodules$1.coreModules.api = api.API; // Use Fetch API by default\n\nlet getAPIModule = fetch_1.getAPIModule;\n\ntry {\n  if (typeof document !== 'undefined' && typeof window !== 'undefined') {\n    // If window and document exist, attempt to load whatever module is available, otherwise use Fetch API\n    getAPIModule = typeof fetch === 'function' && typeof Promise === 'function' ? fetch_1.getAPIModule : jsonp.getAPIModule;\n  }\n} catch (err) {//\n}\n\nmodules.setAPIModule('', getAPIModule(config.getAPIConfig));\n/**\n * Function to enable node-fetch for getting icons on server side\n */\n\n_api.setFetch = nodeFetch => {\n  fetch_1.setFetch(nodeFetch);\n\n  if (getAPIModule !== fetch_1.getAPIModule) {\n    getAPIModule = fetch_1.getAPIModule;\n    modules.setAPIModule('', getAPIModule(config.getAPIConfig));\n  }\n};\n/**\n * Browser stuff\n */\n\n\nif (typeof document !== 'undefined' && typeof window !== 'undefined') {\n  // Set cache and load existing cache\n  modules$1.coreModules.cache = browserStorage.storeCache;\n  browserStorage.loadCache();\n  const _window = window; // Load icons from global \"IconifyPreload\"\n\n  if (_window.IconifyPreload !== void 0) {\n    const preload = _window.IconifyPreload;\n    const err = 'Invalid IconifyPreload syntax.';\n\n    if (typeof preload === 'object' && preload !== null) {\n      (preload instanceof Array ? preload : [preload]).forEach(item => {\n        try {\n          if ( // Check if item is an object and not null/array\n          typeof item !== 'object' || item === null || item instanceof Array || // Check for 'icons' and 'prefix'\n          typeof item.icons !== 'object' || typeof item.prefix !== 'string' || // Add icon set\n          !addCollection(item)) {\n            console.error(err);\n          }\n        } catch (e) {\n          console.error(err);\n        }\n      });\n    }\n  } // Set API from global \"IconifyProviders\"\n\n\n  if (_window.IconifyProviders !== void 0) {\n    const providers = _window.IconifyProviders;\n\n    if (typeof providers === 'object' && providers !== null) {\n      for (let key in providers) {\n        const err = 'IconifyProviders[' + key + '] is invalid.';\n\n        try {\n          const value = providers[key];\n\n          if (typeof value !== 'object' || !value || value.resources === void 0) {\n            continue;\n          }\n\n          if (!config.setAPIConfig(key, value)) {\n            console.error(err);\n          }\n        } catch (e) {\n          console.error(err);\n        }\n      }\n    }\n  }\n}\n\nclass IconComponent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // Render placeholder before component is mounted\n      icon: null\n    };\n  }\n  /**\n   * Abort loading icon\n   */\n\n\n  _abortLoading() {\n    if (this._loading) {\n      this._loading.abort();\n\n      this._loading = null;\n    }\n  }\n  /**\n   * Update state\n   */\n\n\n  _setData(icon) {\n    if (this.state.icon !== icon) {\n      this.setState({\n        icon\n      });\n    }\n  }\n  /**\n   * Check if icon should be loaded\n   */\n\n\n  _checkIcon(changed) {\n    const state = this.state;\n    const icon$1 = this.props.icon; // Icon is an object\n\n    if (typeof icon$1 === 'object' && icon$1 !== null && typeof icon$1.body === 'string') {\n      // Stop loading\n      this._icon = '';\n\n      this._abortLoading();\n\n      if (changed || state.icon === null) {\n        // Set data if it was changed\n        this._setData({\n          data: icon.fullIcon(icon$1)\n        });\n      }\n\n      return;\n    } // Invalid icon?\n\n\n    let iconName;\n\n    if (typeof icon$1 !== 'string' || (iconName = name.stringToIcon(icon$1, false, true)) === null) {\n      this._abortLoading();\n\n      this._setData(null);\n\n      return;\n    } // Load icon\n\n\n    const data = functions$3.getIconData(iconName);\n\n    if (data === null) {\n      // Icon needs to be loaded\n      if (!this._loading || this._loading.name !== icon$1) {\n        // New icon to load\n        this._abortLoading();\n\n        this._icon = '';\n\n        this._setData(null);\n\n        this._loading = {\n          name: icon$1,\n          abort: api.API.loadIcons([iconName], this._checkIcon.bind(this, false))\n        };\n      }\n\n      return;\n    } // Icon data is available\n\n\n    if (this._icon !== icon$1 || state.icon === null) {\n      // New icon or icon has been loaded\n      this._abortLoading();\n\n      this._icon = icon$1; // Add classes\n\n      const classes = ['iconify'];\n\n      if (iconName.prefix !== '') {\n        classes.push('iconify--' + iconName.prefix);\n      }\n\n      if (iconName.provider !== '') {\n        classes.push('iconify--' + iconName.provider);\n      } // Set data\n\n\n      this._setData({\n        data,\n        classes\n      });\n\n      if (this.props.onLoad) {\n        this.props.onLoad(icon$1);\n      }\n    }\n  }\n  /**\n   * Component mounted\n   */\n\n\n  componentDidMount() {\n    this._checkIcon(false);\n  }\n  /**\n   * Component updated\n   */\n\n\n  componentDidUpdate(oldProps) {\n    if (oldProps.icon !== this.props.icon) {\n      this._checkIcon(true);\n    }\n  }\n  /**\n   * Abort loading\n   */\n\n\n  componentWillUnmount() {\n    this._abortLoading();\n  }\n  /**\n   * Render\n   */\n\n\n  render() {\n    const props = this.props;\n    const icon = this.state.icon;\n\n    if (icon === null) {\n      // Render placeholder\n      return props.children ? props.children : React.createElement('span', {});\n    } // Add classes\n\n\n    let newProps = props;\n\n    if (icon.classes) {\n      newProps = { ...props,\n        className: (typeof props.className === 'string' ? props.className + ' ' : '') + icon.classes.join(' ')\n      };\n    } // Render icon\n\n\n    return render(icon.data, newProps, props._inline, props._ref);\n  }\n\n}\n/**\n * Block icon\n *\n * @param props - Component properties\n */\n\n\nconst Icon = React.forwardRef(function Icon(props, ref) {\n  const newProps = { ...props,\n    _ref: ref,\n    _inline: false\n  };\n  return React.createElement(IconComponent, newProps);\n});\n/**\n * Inline icon (has negative verticalAlign that makes it behave like icon font)\n *\n * @param props - Component properties\n */\n\nconst InlineIcon = React.forwardRef(function InlineIcon(props, ref) {\n  const newProps = { ...props,\n    _ref: ref,\n    _inline: true\n  };\n  return React.createElement(IconComponent, newProps);\n});\nexport { Icon, InlineIcon, _api, addAPIProvider, addCollection, addIcon, buildIcon, calculateSize, disableCache, enableCache, getIcon, iconExists, listIcons, loadIcons, replaceIDs };","map":{"version":3,"sources":["/Users/qazi-amaan/Documents/mini-project/react-admin/node_modules/@iconify/react/dist/iconify.esm.js"],"names":["React","createCommonjsModule","fn","module","exports","icon","Object","defineProperty","value","fullIcon","iconDefaults","minifyProps","matchName","freeze","left","top","width","height","rotate","vFlip","hFlip","data","name","validateIcon","stringToIcon","validate","allowSimpleName","provider","colonSeparated","split","slice","length","shift","pop","prefix","result","dashSeparated","join","icon$1","match","merge","mergeIconData","alias","key","prop","parse","parseIconSet","defaultsKeys","keys","resolveAlias","icons","aliases","level","parent","callback","list","added","not_found","Array","forEach","push","defaults","create","body","storage_1","listIcons","getIcon","iconExists","addIcon","addIconSet","getStorage","newStorage","storage","missing","providerStorage","t","Date","now","err","allIcons","providers","prefixes","map","concat","functions$3","storageFunctions","addCollection","getIconData","allowSimpleNames","simpleNames","allow","name$1","id","replaceIDs","regex","replaceValue","escapeRegExp","str","replace","randomPrefix","toString","Math","random","counter","ids","exec","newID","RegExp","size","calculateSize","unitsSplit","unitsTest","ratio","precision","ceil","oldParts","newParts","code","isNumber","test","num","parseFloat","isNaN","customisations","mergeCustomisations","inline","hAlign","vAlign","item","attr","build","iconToSVG","preserveAspectRatio","props","box","transformations","rotation","tempValue","floor","unshift","attributes","viewBox","functions$2","builderFunctions","buildIcon","customisations$1","modules$1","coreModules","config$1","defaultConfig","resources","index","timeout","dataAfterTimeout","query","sendQuery","config","payload","done","success","resourcesCount","startIndex","nextIndex","startTime","status","queriesSent","lastError","timer","queue","doneCallbacks","resetTimer","clearTimeout","abort","subscribe","overwrite","getQueryStatus","queriesPending","failQuery","clearQueue","filter","moduleResponse","error","isError","queued","execNext","indexOf","resource","setTimeout","redundancy","initRedundancy","setConfig","Error","newConfig","cfg","queries","cleanup","query$1","queryCallback","doneCallback","newIndex","find","instance","setIndex","getIndex","sort","sortIcons","loaded","pending","a","b","localeCompare","lastIcon","localStorage","callbacks","storeCallback","updateCallbacks","pendingUpdates","removeCallback","sources","source","providerCallbacks","items","row","providerPendingUpdates","hasPending","oldLength","idCounter","pendingSources","bind","modules","getAPIModule","setAPIModule","getAPIConfig","setAPIConfig","createConfig","path","maxURL","configStorage","fallBackAPISources","fallBackAPI","customConfig","getProviders","listToIcons","api","API","getRedundancyCache","emptyCallback","pendingIcons","iconsToLoad","loaderFlags","queueFlags","redundancyCache","redundancy$1","cachedReundancy","loadedNewIcons","providerLoaderFlags","errorsCache","loadNewIcons","time","console","providerIconsToLoad","providerQueueFlags","providerPendingIcons","params","prepare","send","cache","isPending","loadIcons","cleanedIcons","sortedIcons","callCallback","newIcons","lastProvider","lastPrefix","providerNewIcons","pendingQueue","functions$1","APIInternalFunctions","APIFunctions","addAPIProvider","getAPI","jsonp","rootVar","endPoint","maxLengthCache","pathCache","hash","total","i","charCodeAt","getGlobal","globalRoot","self","extraPrefix","iconifyRoot","cb","calculateMaxLength","maxHostLength","host","max","extraLength","cacheKey","results","maxLength","iconsList","cbPrefix","global","cbCounter","callbackName","uri","script","document","createElement","type","async","src","head","appendChild","fetch_1","setFetch","fetchModule","fetch","then","response","json","catch","errno","browserStorage","storeCache","loadCache","mock","emptyList","count","cacheVersion","cachePrefix","countKey","versionKey","hour","cacheExpiration","local","session","_window","window","fakeWindow","setCount","setItem","getCount","getItem","parseInt","initCache","destroyCache","removeItem","minTime","load","func","valid","JSON","cached","version","store","stringify","functions","toggleBrowserCache","shorthand","alignmentFromString","flipFromString","separator","custom","flip","trim","align","rotateFromString","units","svgDefaults","inlineDefaults","render","ref","defaultProps","style","componentProps","color","localCounter","id$1","dangerouslySetInnerHTML","__html","verticalAlign","enableCache","disableCache","_api","Promise","nodeFetch","IconifyPreload","preload","e","IconifyProviders","IconComponent","Component","constructor","state","_abortLoading","_loading","_setData","setState","_checkIcon","changed","_icon","iconName","classes","onLoad","componentDidMount","componentDidUpdate","oldProps","componentWillUnmount","children","newProps","className","_inline","_ref","Icon","forwardRef","InlineIcon"],"mappings":"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","sourcesContent":["import React from 'react';\n\nfunction createCommonjsModule(fn) {\n  var module = { exports: {} };\n\treturn fn(module, module.exports), module.exports;\n}\n\nvar icon = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fullIcon = exports.iconDefaults = exports.minifyProps = exports.matchName = void 0;\n/**\n * Expression to test part of icon name.\n */\nexports.matchName = /^[a-z0-9]+(-[a-z0-9]+)*$/;\n/**\n * Properties that can be minified\n *\n * Values of all these properties are awalys numbers\n */\nexports.minifyProps = [\n    // All IconifyDimenisons properties\n    'width',\n    'height',\n    'top',\n    'left',\n];\n/**\n * Default values for all optional IconifyIcon properties\n */\nexports.iconDefaults = Object.freeze({\n    left: 0,\n    top: 0,\n    width: 16,\n    height: 16,\n    rotate: 0,\n    vFlip: false,\n    hFlip: false,\n});\n/**\n * Add optional properties to icon\n */\nfunction fullIcon(data) {\n    return { ...exports.iconDefaults, ...data };\n}\nexports.fullIcon = fullIcon;\n});\n\nvar name = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateIcon = exports.stringToIcon = void 0;\n\n/**\n * Convert string to Icon object.\n */\nconst stringToIcon = (value, validate, allowSimpleName, provider = '') => {\n    const colonSeparated = value.split(':');\n    // Check for provider with correct '@' at start\n    if (value.slice(0, 1) === '@') {\n        // First part is provider\n        if (colonSeparated.length < 2 || colonSeparated.length > 3) {\n            // \"@provider:prefix:name\" or \"@provider:prefix-name\"\n            return null;\n        }\n        provider = colonSeparated.shift().slice(1);\n    }\n    // Check split by colon: \"prefix:name\", \"provider:prefix:name\"\n    if (colonSeparated.length > 3 || !colonSeparated.length) {\n        return null;\n    }\n    if (colonSeparated.length > 1) {\n        // \"prefix:name\"\n        const name = colonSeparated.pop();\n        const prefix = colonSeparated.pop();\n        const result = {\n            // Allow provider without '@': \"provider:prefix:name\"\n            provider: colonSeparated.length > 0 ? colonSeparated[0] : provider,\n            prefix,\n            name,\n        };\n        return validate && !exports.validateIcon(result) ? null : result;\n    }\n    // Attempt to split by dash: \"prefix-name\"\n    const name = colonSeparated[0];\n    const dashSeparated = name.split('-');\n    if (dashSeparated.length > 1) {\n        const result = {\n            provider: provider,\n            prefix: dashSeparated.shift(),\n            name: dashSeparated.join('-'),\n        };\n        return validate && !exports.validateIcon(result) ? null : result;\n    }\n    // If allowEmpty is set, allow empty provider and prefix, allowing names like \"home\"\n    if (allowSimpleName && provider === '') {\n        const result = {\n            provider: provider,\n            prefix: '',\n            name,\n        };\n        return validate && !exports.validateIcon(result, allowSimpleName)\n            ? null\n            : result;\n    }\n    return null;\n};\nexports.stringToIcon = stringToIcon;\n/**\n * Check if icon is valid.\n *\n * This function is not part of stringToIcon because validation is not needed for most code.\n */\nconst validateIcon = (icon$1, allowSimpleName) => {\n    if (!icon$1) {\n        return false;\n    }\n    return !!((icon$1.provider === '' || icon$1.provider.match(icon.matchName)) &&\n        ((allowSimpleName && icon$1.prefix === '') ||\n            icon$1.prefix.match(icon.matchName)) &&\n        icon$1.name.match(icon.matchName));\n};\nexports.validateIcon = validateIcon;\n});\n\nvar merge = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mergeIconData = void 0;\n\n/**\n * Merge icon and alias\n */\nfunction mergeIconData(icon$1, alias) {\n    const result = { ...icon$1 };\n    for (const key in icon.iconDefaults) {\n        const prop = key;\n        if (alias[prop] !== void 0) {\n            const value = alias[prop];\n            if (result[prop] === void 0) {\n                // Missing value\n                result[prop] = value;\n                continue;\n            }\n            switch (prop) {\n                case 'rotate':\n                    result[prop] =\n                        (result[prop] + value) % 4;\n                    break;\n                case 'hFlip':\n                case 'vFlip':\n                    result[prop] = value !== result[prop];\n                    break;\n                default:\n                    // Overwrite value\n                    result[prop] =\n                        value;\n            }\n        }\n    }\n    return result;\n}\nexports.mergeIconData = mergeIconData;\n});\n\nvar parse = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseIconSet = void 0;\n\n\n/**\n * Get list of defaults keys\n */\nconst defaultsKeys = Object.keys(icon.iconDefaults);\n/**\n * Resolve alias\n */\nfunction resolveAlias(alias, icons, aliases, level = 0) {\n    const parent = alias.parent;\n    if (icons[parent] !== void 0) {\n        return merge.mergeIconData(icons[parent], alias);\n    }\n    if (aliases[parent] !== void 0) {\n        if (level > 2) {\n            // icon + alias + alias + alias = too much nesting, possibly infinite\n            return null;\n        }\n        const icon = resolveAlias(aliases[parent], icons, aliases, level + 1);\n        if (icon) {\n            return merge.mergeIconData(icon, alias);\n        }\n    }\n    return null;\n}\n/**\n * Extract icons from an icon set\n */\nfunction parseIconSet(data, callback, list = 'none') {\n    const added = [];\n    // Must be an object\n    if (typeof data !== 'object') {\n        return list === 'none' ? false : added;\n    }\n    // Check for missing icons list returned by API\n    if (data.not_found instanceof Array) {\n        data.not_found.forEach((name) => {\n            callback(name, null);\n            if (list === 'all') {\n                added.push(name);\n            }\n        });\n    }\n    // Must have 'icons' object\n    if (typeof data.icons !== 'object') {\n        return list === 'none' ? false : added;\n    }\n    // Get default values\n    const defaults = Object.create(null);\n    defaultsKeys.forEach((key) => {\n        if (data[key] !== void 0 && typeof data[key] !== 'object') {\n            defaults[key] = data[key];\n        }\n    });\n    // Get icons\n    const icons = data.icons;\n    Object.keys(icons).forEach((name) => {\n        const icon$1 = icons[name];\n        if (typeof icon$1.body !== 'string') {\n            return;\n        }\n        // Freeze icon to make sure it will not be modified\n        callback(name, Object.freeze({ ...icon.iconDefaults, ...defaults, ...icon$1 }));\n        added.push(name);\n    });\n    // Get aliases\n    if (typeof data.aliases === 'object') {\n        const aliases = data.aliases;\n        Object.keys(aliases).forEach((name) => {\n            const icon$1 = resolveAlias(aliases[name], icons, aliases, 1);\n            if (icon$1) {\n                // Freeze icon to make sure it will not be modified\n                callback(name, Object.freeze({ ...icon.iconDefaults, ...defaults, ...icon$1 }));\n                added.push(name);\n            }\n        });\n    }\n    return list === 'none' ? added.length > 0 : added;\n}\nexports.parseIconSet = parseIconSet;\n});\n\nvar storage_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.listIcons = exports.getIcon = exports.iconExists = exports.addIcon = exports.addIconSet = exports.getStorage = exports.newStorage = void 0;\n\n\n/**\n * Storage by provider and prefix\n */\nconst storage = Object.create(null);\n/**\n * Create new storage\n */\nfunction newStorage(provider, prefix) {\n    return {\n        provider,\n        prefix,\n        icons: Object.create(null),\n        missing: Object.create(null),\n    };\n}\nexports.newStorage = newStorage;\n/**\n * Get storage for provider and prefix\n */\nfunction getStorage(provider, prefix) {\n    if (storage[provider] === void 0) {\n        storage[provider] = Object.create(null);\n    }\n    const providerStorage = storage[provider];\n    if (providerStorage[prefix] === void 0) {\n        providerStorage[prefix] = newStorage(provider, prefix);\n    }\n    return providerStorage[prefix];\n}\nexports.getStorage = getStorage;\n/**\n * Add icon set to storage\n *\n * Returns array of added icons if 'list' is true and icons were added successfully\n */\nfunction addIconSet(storage, data, list = 'none') {\n    const t = Date.now();\n    return parse.parseIconSet(data, (name, icon) => {\n        if (icon === null) {\n            storage.missing[name] = t;\n        }\n        else {\n            storage.icons[name] = icon;\n        }\n    }, list);\n}\nexports.addIconSet = addIconSet;\n/**\n * Add icon to storage\n */\nfunction addIcon(storage, name, icon$1) {\n    try {\n        if (typeof icon$1.body === 'string') {\n            // Freeze icon to make sure it will not be modified\n            storage.icons[name] = Object.freeze(icon.fullIcon(icon$1));\n            return true;\n        }\n    }\n    catch (err) {\n        // Do nothing\n    }\n    return false;\n}\nexports.addIcon = addIcon;\n/**\n * Check if icon exists\n */\nfunction iconExists(storage, name) {\n    return storage.icons[name] !== void 0;\n}\nexports.iconExists = iconExists;\n/**\n * Get icon data\n */\nfunction getIcon(storage, name) {\n    const value = storage.icons[name];\n    return value === void 0 ? null : value;\n}\nexports.getIcon = getIcon;\n/**\n * List available icons\n */\nfunction listIcons(provider, prefix) {\n    let allIcons = [];\n    // Get providers\n    let providers;\n    if (typeof provider === 'string') {\n        providers = [provider];\n    }\n    else {\n        providers = Object.keys(storage);\n    }\n    // Get all icons\n    providers.forEach((provider) => {\n        let prefixes;\n        if (typeof provider === 'string' && typeof prefix === 'string') {\n            prefixes = [prefix];\n        }\n        else {\n            prefixes =\n                storage[provider] === void 0\n                    ? []\n                    : Object.keys(storage[provider]);\n        }\n        prefixes.forEach((prefix) => {\n            const storage = getStorage(provider, prefix);\n            const icons = Object.keys(storage.icons).map((name) => (provider !== '' ? '@' + provider + ':' : '') +\n                prefix +\n                ':' +\n                name);\n            allIcons = allIcons.concat(icons);\n        });\n    });\n    return allIcons;\n}\nexports.listIcons = listIcons;\n});\n\nvar functions$3 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.storageFunctions = exports.addCollection = exports.addIcon = exports.getIconData = exports.allowSimpleNames = void 0;\n\n\n\n/**\n * Allow storing icons without provider or prefix, making it possible to store icons like \"home\"\n */\nlet simpleNames = false;\nfunction allowSimpleNames(allow) {\n    if (typeof allow === 'boolean') {\n        simpleNames = allow;\n    }\n    return simpleNames;\n}\nexports.allowSimpleNames = allowSimpleNames;\n/**\n * Get icon data\n */\nfunction getIconData(name$1) {\n    const icon = typeof name$1 === 'string' ? name.stringToIcon(name$1, true, simpleNames) : name$1;\n    return icon\n        ? storage_1.getIcon(storage_1.getStorage(icon.provider, icon.prefix), icon.name)\n        : null;\n}\nexports.getIconData = getIconData;\n/**\n * Add one icon\n */\nfunction addIcon(name$1, data) {\n    const icon = name.stringToIcon(name$1, true, simpleNames);\n    if (!icon) {\n        return false;\n    }\n    const storage = storage_1.getStorage(icon.provider, icon.prefix);\n    return storage_1.addIcon(storage, icon.name, data);\n}\nexports.addIcon = addIcon;\n/**\n * Add icon set\n */\nfunction addCollection(data, provider) {\n    if (typeof data !== 'object') {\n        return false;\n    }\n    // Get provider\n    if (typeof provider !== 'string') {\n        provider = typeof data.provider === 'string' ? data.provider : '';\n    }\n    // Check for simple names: requires empty provider and prefix\n    if (simpleNames &&\n        provider === '' &&\n        (typeof data.prefix !== 'string' || data.prefix === '')) {\n        // Simple names: add icons one by one\n        let added = false;\n        parse.parseIconSet(data, (name, icon) => {\n            if (icon !== null && addIcon(name, icon)) {\n                added = true;\n            }\n        });\n        return added;\n    }\n    // Validate provider and prefix\n    if (typeof data.prefix !== 'string' ||\n        !name.validateIcon({\n            provider,\n            prefix: data.prefix,\n            name: 'a',\n        })) {\n        return false;\n    }\n    const storage = storage_1.getStorage(provider, data.prefix);\n    return !!storage_1.addIconSet(storage, data);\n}\nexports.addCollection = addCollection;\n/**\n * Export\n */\nexports.storageFunctions = {\n    // Check if icon exists\n    iconExists: (name) => getIconData(name) !== null,\n    // Get raw icon data\n    getIcon: (name) => {\n        const result = getIconData(name);\n        return result ? { ...result } : null;\n    },\n    // List icons\n    listIcons: storage_1.listIcons,\n    // Add icon\n    addIcon,\n    // Add icon set\n    addCollection,\n};\n});\n\nvar id = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.replaceIDs = void 0;\n/**\n * Regular expression for finding ids\n */\nconst regex = /\\sid=\"(\\S+)\"/g;\n/**\n * Match for allowed characters before and after id in replacement, including () for group\n */\nconst replaceValue = '([^A-Za-z0-9_-])';\n/**\n * Escape value for 'new RegExp()'\n */\nfunction escapeRegExp(str) {\n    return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\n}\n/**\n * New random-ish prefix for ids\n */\nconst randomPrefix = 'IconifyId-' +\n    Date.now().toString(16) +\n    '-' +\n    ((Math.random() * 0x1000000) | 0).toString(16) +\n    '-';\n/**\n * Counter for ids, increasing with every replacement\n */\nlet counter = 0;\n/**\n * Replace IDs in SVG output with unique IDs\n * Fast replacement without parsing XML, assuming commonly used patterns and clean XML (icon should have been cleaned up with Iconify Tools or SVGO).\n */\nfunction replaceIDs(body, prefix = randomPrefix) {\n    // Find all IDs\n    const ids = [];\n    let match;\n    while ((match = regex.exec(body))) {\n        ids.push(match[1]);\n    }\n    if (!ids.length) {\n        return body;\n    }\n    // Replace with unique ids\n    ids.forEach((id) => {\n        const newID = typeof prefix === 'function' ? prefix() : prefix + counter++;\n        body = body.replace(new RegExp(replaceValue + '(' + escapeRegExp(id) + ')' + replaceValue, 'g'), '$1' + newID + '$3');\n    });\n    return body;\n}\nexports.replaceIDs = replaceIDs;\n});\n\nvar size = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.calculateSize = void 0;\n/**\n * Regular expressions for calculating dimensions\n */\nconst unitsSplit = /(-?[0-9.]*[0-9]+[0-9.]*)/g;\nconst unitsTest = /^-?[0-9.]*[0-9]+[0-9.]*$/g;\n/**\n * Calculate second dimension when only 1 dimension is set\n *\n * @param {string|number} size One dimension (such as width)\n * @param {number} ratio Width/height ratio.\n *      If size is width, ratio = height/width\n *      If size is height, ratio = width/height\n * @param {number} [precision] Floating number precision in result to minimize output. Default = 2\n * @return {string|number} Another dimension\n */\nfunction calculateSize(size, ratio, precision) {\n    if (ratio === 1) {\n        return size;\n    }\n    precision = precision === void 0 ? 100 : precision;\n    if (typeof size === 'number') {\n        return Math.ceil(size * ratio * precision) / precision;\n    }\n    if (typeof size !== 'string') {\n        return size;\n    }\n    // Split code into sets of strings and numbers\n    const oldParts = size.split(unitsSplit);\n    if (oldParts === null || !oldParts.length) {\n        return size;\n    }\n    const newParts = [];\n    let code = oldParts.shift();\n    let isNumber = unitsTest.test(code);\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n        if (isNumber) {\n            const num = parseFloat(code);\n            if (isNaN(num)) {\n                newParts.push(code);\n            }\n            else {\n                newParts.push(Math.ceil(num * ratio * precision) / precision);\n            }\n        }\n        else {\n            newParts.push(code);\n        }\n        // next\n        code = oldParts.shift();\n        if (code === void 0) {\n            return newParts.join('');\n        }\n        isNumber = !isNumber;\n    }\n}\nexports.calculateSize = calculateSize;\n});\n\nvar customisations = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.mergeCustomisations = exports.defaults = void 0;\n/**\n * Default icon customisations values\n */\nexports.defaults = Object.freeze({\n    // Display mode\n    inline: false,\n    // Dimensions\n    width: null,\n    height: null,\n    // Alignment\n    hAlign: 'center',\n    vAlign: 'middle',\n    slice: false,\n    // Transformations\n    hFlip: false,\n    vFlip: false,\n    rotate: 0,\n});\n/**\n * Convert IconifyIconCustomisations to FullIconCustomisations\n */\nfunction mergeCustomisations(defaults, item) {\n    const result = {};\n    for (const key in defaults) {\n        const attr = key;\n        // Copy old value\n        result[attr] = defaults[attr];\n        if (item[attr] === void 0) {\n            continue;\n        }\n        // Validate new value\n        const value = item[attr];\n        switch (attr) {\n            // Boolean attributes that override old value\n            case 'inline':\n            case 'slice':\n                if (typeof value === 'boolean') {\n                    result[attr] = value;\n                }\n                break;\n            // Boolean attributes that are merged\n            case 'hFlip':\n            case 'vFlip':\n                if (value === true) {\n                    result[attr] = !result[attr];\n                }\n                break;\n            // Non-empty string\n            case 'hAlign':\n            case 'vAlign':\n                if (typeof value === 'string' && value !== '') {\n                    result[attr] = value;\n                }\n                break;\n            // Non-empty string / non-zero number / null\n            case 'width':\n            case 'height':\n                if ((typeof value === 'string' && value !== '') ||\n                    (typeof value === 'number' && value) ||\n                    value === null) {\n                    result[attr] = value;\n                }\n                break;\n            // Rotation\n            case 'rotate':\n                if (typeof value === 'number') {\n                    result[attr] += value;\n                }\n                break;\n        }\n    }\n    return result;\n}\nexports.mergeCustomisations = mergeCustomisations;\n});\n\nvar build = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.iconToSVG = void 0;\n\n/**\n * Get preserveAspectRatio value\n */\nfunction preserveAspectRatio(props) {\n    let result = '';\n    switch (props.hAlign) {\n        case 'left':\n            result += 'xMin';\n            break;\n        case 'right':\n            result += 'xMax';\n            break;\n        default:\n            result += 'xMid';\n    }\n    switch (props.vAlign) {\n        case 'top':\n            result += 'YMin';\n            break;\n        case 'bottom':\n            result += 'YMax';\n            break;\n        default:\n            result += 'YMid';\n    }\n    result += props.slice ? ' slice' : ' meet';\n    return result;\n}\n/**\n * Get SVG attributes and content from icon + customisations\n *\n * Does not generate style to make it compatible with frameworks that use objects for style, such as React.\n * Instead, it generates 'inline' value. If true, rendering engine should add verticalAlign: -0.125em to icon.\n *\n * Customisations should be normalised by platform specific parser.\n * Result should be converted to <svg> by platform specific parser.\n * Use replaceIDs to generate unique IDs for body.\n */\nfunction iconToSVG(icon, customisations) {\n    // viewBox\n    const box = {\n        left: icon.left,\n        top: icon.top,\n        width: icon.width,\n        height: icon.height,\n    };\n    // Body\n    let body = icon.body;\n    // Apply transformations\n    [icon, customisations].forEach((props) => {\n        const transformations = [];\n        const hFlip = props.hFlip;\n        const vFlip = props.vFlip;\n        let rotation = props.rotate;\n        // Icon is flipped first, then rotated\n        if (hFlip) {\n            if (vFlip) {\n                rotation += 2;\n            }\n            else {\n                // Horizontal flip\n                transformations.push('translate(' +\n                    (box.width + box.left) +\n                    ' ' +\n                    (0 - box.top) +\n                    ')');\n                transformations.push('scale(-1 1)');\n                box.top = box.left = 0;\n            }\n        }\n        else if (vFlip) {\n            // Vertical flip\n            transformations.push('translate(' +\n                (0 - box.left) +\n                ' ' +\n                (box.height + box.top) +\n                ')');\n            transformations.push('scale(1 -1)');\n            box.top = box.left = 0;\n        }\n        let tempValue;\n        if (rotation < 0) {\n            rotation -= Math.floor(rotation / 4) * 4;\n        }\n        rotation = rotation % 4;\n        switch (rotation) {\n            case 1:\n                // 90deg\n                tempValue = box.height / 2 + box.top;\n                transformations.unshift('rotate(90 ' + tempValue + ' ' + tempValue + ')');\n                break;\n            case 2:\n                // 180deg\n                transformations.unshift('rotate(180 ' +\n                    (box.width / 2 + box.left) +\n                    ' ' +\n                    (box.height / 2 + box.top) +\n                    ')');\n                break;\n            case 3:\n                // 270deg\n                tempValue = box.width / 2 + box.left;\n                transformations.unshift('rotate(-90 ' + tempValue + ' ' + tempValue + ')');\n                break;\n        }\n        if (rotation % 2 === 1) {\n            // Swap width/height and x/y for 90deg or 270deg rotation\n            if (box.left !== 0 || box.top !== 0) {\n                tempValue = box.left;\n                box.left = box.top;\n                box.top = tempValue;\n            }\n            if (box.width !== box.height) {\n                tempValue = box.width;\n                box.width = box.height;\n                box.height = tempValue;\n            }\n        }\n        if (transformations.length) {\n            body =\n                '<g transform=\"' +\n                    transformations.join(' ') +\n                    '\">' +\n                    body +\n                    '</g>';\n        }\n    });\n    // Calculate dimensions\n    let width, height;\n    if (customisations.width === null && customisations.height === null) {\n        // Set height to '1em', calculate width\n        height = '1em';\n        width = size.calculateSize(height, box.width / box.height);\n    }\n    else if (customisations.width !== null &&\n        customisations.height !== null) {\n        // Values are set\n        width = customisations.width;\n        height = customisations.height;\n    }\n    else if (customisations.height !== null) {\n        // Height is set\n        height = customisations.height;\n        width = size.calculateSize(height, box.width / box.height);\n    }\n    else {\n        // Width is set\n        width = customisations.width;\n        height = size.calculateSize(width, box.height / box.width);\n    }\n    // Check for 'auto'\n    if (width === 'auto') {\n        width = box.width;\n    }\n    if (height === 'auto') {\n        height = box.height;\n    }\n    // Convert to string\n    width = typeof width === 'string' ? width : width + '';\n    height = typeof height === 'string' ? height : height + '';\n    // Result\n    const result = {\n        attributes: {\n            width,\n            height,\n            preserveAspectRatio: preserveAspectRatio(customisations),\n            viewBox: box.left + ' ' + box.top + ' ' + box.width + ' ' + box.height,\n        },\n        body,\n    };\n    if (customisations.inline) {\n        result.inline = true;\n    }\n    return result;\n}\nexports.iconToSVG = iconToSVG;\n});\n\nvar functions$2 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.builderFunctions = void 0;\n\n\n\n\n\n/**\n * Exported builder functions\n */\nexports.builderFunctions = {\n    replaceIDs: id.replaceIDs,\n    calculateSize: size.calculateSize,\n    buildIcon: (icon$1, customisations$1) => {\n        return build.iconToSVG(icon.fullIcon(icon$1), customisations.mergeCustomisations(customisations.defaults, customisations$1));\n    },\n};\n});\n\nvar modules$1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.coreModules = void 0;\nexports.coreModules = {};\n});\n\nvar config$1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.defaultConfig = void 0;\n/**\n * Default RedundancyConfig for API calls\n */\nexports.defaultConfig = {\n    resources: [],\n    index: 0,\n    timeout: 2000,\n    rotate: 750,\n    random: false,\n    dataAfterTimeout: false,\n};\n});\n\nvar query = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sendQuery = void 0;\n/**\n * Send query\n */\nfunction sendQuery(config, payload, query, done, success) {\n    // Get number of resources\n    const resourcesCount = config.resources.length;\n    // Save start index\n    const startIndex = config.random\n        ? Math.floor(Math.random() * resourcesCount)\n        : config.index;\n    // Get resources\n    let resources;\n    if (config.random) {\n        // Randomise array\n        let list = config.resources.slice(0);\n        resources = [];\n        while (list.length > 1) {\n            const nextIndex = Math.floor(Math.random() * list.length);\n            resources.push(list[nextIndex]);\n            list = list.slice(0, nextIndex).concat(list.slice(nextIndex + 1));\n        }\n        resources = resources.concat(list);\n    }\n    else {\n        // Rearrange resources to start with startIndex\n        resources = config.resources\n            .slice(startIndex)\n            .concat(config.resources.slice(0, startIndex));\n    }\n    // Counters, status\n    const startTime = Date.now();\n    let status = 'pending';\n    let queriesSent = 0;\n    let lastError = void 0;\n    // Timer\n    let timer = null;\n    // Execution queue\n    let queue = [];\n    // Callbacks to call when query is complete\n    let doneCallbacks = [];\n    if (typeof done === 'function') {\n        doneCallbacks.push(done);\n    }\n    /**\n     * Reset timer\n     */\n    function resetTimer() {\n        if (timer) {\n            clearTimeout(timer);\n            timer = null;\n        }\n    }\n    /**\n     * Abort everything\n     */\n    function abort() {\n        // Change status\n        if (status === 'pending') {\n            status = 'aborted';\n        }\n        // Reset timer\n        resetTimer();\n        // Abort all queued items\n        queue.forEach((item) => {\n            if (item.abort) {\n                item.abort();\n            }\n            if (item.status === 'pending') {\n                item.status = 'aborted';\n            }\n        });\n        queue = [];\n    }\n    /**\n     * Add / replace callback to call when execution is complete.\n     * This can be used to abort pending query implementations when query is complete or aborted.\n     */\n    function subscribe(callback, overwrite) {\n        if (overwrite) {\n            doneCallbacks = [];\n        }\n        if (typeof callback === 'function') {\n            doneCallbacks.push(callback);\n        }\n    }\n    /**\n     * Get query status\n     */\n    function getQueryStatus() {\n        return {\n            startTime,\n            payload,\n            status,\n            queriesSent,\n            queriesPending: queue.length,\n            subscribe,\n            abort,\n        };\n    }\n    /**\n     * Fail query\n     */\n    function failQuery() {\n        status = 'failed';\n        // Send notice to all callbacks\n        doneCallbacks.forEach((callback) => {\n            callback(void 0, lastError);\n        });\n    }\n    /**\n     * Clear queue\n     */\n    function clearQueue() {\n        queue = queue.filter((item) => {\n            if (item.status === 'pending') {\n                item.status = 'aborted';\n            }\n            if (item.abort) {\n                item.abort();\n            }\n            return false;\n        });\n    }\n    /**\n     * Got response from module\n     */\n    function moduleResponse(item, data, error) {\n        const isError = data === void 0;\n        // Remove item from queue\n        queue = queue.filter((queued) => queued !== item);\n        // Check status\n        switch (status) {\n            case 'pending':\n                // Pending\n                break;\n            case 'failed':\n                if (isError || !config.dataAfterTimeout) {\n                    // Query has already timed out or dataAfterTimeout is disabled\n                    return;\n                }\n                // Success after failure\n                break;\n            default:\n                // Aborted or completed\n                return;\n        }\n        // Error\n        if (isError) {\n            if (error !== void 0) {\n                lastError = error;\n            }\n            if (!queue.length) {\n                if (!resources.length) {\n                    // Nothing else queued, nothing can be queued\n                    failQuery();\n                }\n                else {\n                    // Queue is empty: run next item immediately\n                    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n                    execNext();\n                }\n            }\n            return;\n        }\n        // Reset timers, abort pending queries\n        resetTimer();\n        clearQueue();\n        // Update index in Redundancy\n        if (success && !config.random) {\n            const index = config.resources.indexOf(item.resource);\n            if (index !== -1 && index !== config.index) {\n                success(index);\n            }\n        }\n        // Mark as completed and call callbacks\n        status = 'completed';\n        doneCallbacks.forEach((callback) => {\n            callback(data);\n        });\n    }\n    /**\n     * Execute next query\n     */\n    function execNext() {\n        // Check status\n        if (status !== 'pending') {\n            return;\n        }\n        // Reset timer\n        resetTimer();\n        // Get resource\n        const resource = resources.shift();\n        if (resource === void 0) {\n            // Nothing to execute: wait for final timeout before failing\n            if (queue.length) {\n                const timeout = typeof config.timeout === 'function'\n                    ? config.timeout(startTime)\n                    : config.timeout;\n                if (timeout) {\n                    // Last timeout before failing to allow late response\n                    timer = setTimeout(() => {\n                        resetTimer();\n                        if (status === 'pending') {\n                            // Clear queue\n                            clearQueue();\n                            failQuery();\n                        }\n                    }, timeout);\n                    return;\n                }\n            }\n            // Fail\n            failQuery();\n            return;\n        }\n        // Create new item\n        const item = {\n            getQueryStatus,\n            status: 'pending',\n            resource,\n            done: (data, error) => {\n                moduleResponse(item, data, error);\n            },\n        };\n        // Add to queue\n        queue.push(item);\n        // Bump next index\n        queriesSent++;\n        // Get timeout for next item\n        const timeout = typeof config.rotate === 'function'\n            ? config.rotate(queriesSent, startTime)\n            : config.rotate;\n        // Create timer\n        timer = setTimeout(execNext, timeout);\n        // Execute it\n        query(resource, payload, item);\n    }\n    // Execute first query on next tick\n    setTimeout(execNext);\n    // Return getQueryStatus()\n    return getQueryStatus;\n}\nexports.sendQuery = sendQuery;\n});\n\nvar redundancy = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.initRedundancy = void 0;\n\n\n/**\n * Set configuration\n */\nfunction setConfig(config) {\n    if (typeof config !== 'object' ||\n        typeof config.resources !== 'object' ||\n        !(config.resources instanceof Array) ||\n        !config.resources.length) {\n        throw new Error('Invalid Reduncancy configuration');\n    }\n    const newConfig = Object.create(null);\n    let key;\n    for (key in config$1.defaultConfig) {\n        if (config[key] !== void 0) {\n            newConfig[key] = config[key];\n        }\n        else {\n            newConfig[key] = config$1.defaultConfig[key];\n        }\n    }\n    return newConfig;\n}\n/**\n * Redundancy instance\n */\nfunction initRedundancy(cfg) {\n    // Configuration\n    const config = setConfig(cfg);\n    // List of queries\n    let queries = [];\n    /**\n     * Remove aborted and completed queries\n     */\n    function cleanup() {\n        queries = queries.filter((item) => item().status === 'pending');\n    }\n    /**\n     * Send query\n     */\n    function query$1(payload, queryCallback, doneCallback) {\n        const query$1 = query.sendQuery(config, payload, queryCallback, (data, error) => {\n            // Remove query from list\n            cleanup();\n            // Call callback\n            if (doneCallback) {\n                doneCallback(data, error);\n            }\n        }, (newIndex) => {\n            // Update start index\n            config.index = newIndex;\n        });\n        queries.push(query$1);\n        return query$1;\n    }\n    /**\n     * Find instance\n     */\n    function find(callback) {\n        const result = queries.find((value) => {\n            return callback(value);\n        });\n        return result !== void 0 ? result : null;\n    }\n    // Create and return functions\n    const instance = {\n        query: query$1,\n        find,\n        setIndex: (index) => {\n            config.index = index;\n        },\n        getIndex: () => config.index,\n        cleanup,\n    };\n    return instance;\n}\nexports.initRedundancy = initRedundancy;\n});\n\nvar sort = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sortIcons = void 0;\n\n/**\n * Check if icons have been loaded\n */\nfunction sortIcons(icons) {\n    const result = {\n        loaded: [],\n        missing: [],\n        pending: [],\n    };\n    const storage = Object.create(null);\n    // Sort icons alphabetically to prevent duplicates and make sure they are sorted in API queries\n    icons.sort((a, b) => {\n        if (a.provider !== b.provider) {\n            return a.provider.localeCompare(b.provider);\n        }\n        if (a.prefix !== b.prefix) {\n            return a.prefix.localeCompare(b.prefix);\n        }\n        return a.name.localeCompare(b.name);\n    });\n    let lastIcon = {\n        provider: '',\n        prefix: '',\n        name: '',\n    };\n    icons.forEach((icon) => {\n        if (lastIcon.name === icon.name &&\n            lastIcon.prefix === icon.prefix &&\n            lastIcon.provider === icon.provider) {\n            return;\n        }\n        lastIcon = icon;\n        // Check icon\n        const provider = icon.provider;\n        const prefix = icon.prefix;\n        const name = icon.name;\n        if (storage[provider] === void 0) {\n            storage[provider] = Object.create(null);\n        }\n        const providerStorage = storage[provider];\n        if (providerStorage[prefix] === void 0) {\n            providerStorage[prefix] = storage_1.getStorage(provider, prefix);\n        }\n        const localStorage = providerStorage[prefix];\n        let list;\n        if (localStorage.icons[name] !== void 0) {\n            list = result.loaded;\n        }\n        else if (prefix === '' || localStorage.missing[name] !== void 0) {\n            // Mark icons without prefix as missing because they cannot be loaded from API\n            list = result.missing;\n        }\n        else {\n            list = result.pending;\n        }\n        const item = {\n            provider,\n            prefix,\n            name,\n        };\n        list.push(item);\n    });\n    return result;\n}\nexports.sortIcons = sortIcons;\n});\n\nvar callbacks = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.storeCallback = exports.updateCallbacks = exports.callbacks = void 0;\n\n// Records sorted by provider and prefix\n// This export is only for unit testing, should not be used\nexports.callbacks = Object.create(null);\nconst pendingUpdates = Object.create(null);\n/**\n * Remove callback\n */\nfunction removeCallback(sources, id) {\n    sources.forEach((source) => {\n        const provider = source.provider;\n        if (exports.callbacks[provider] === void 0) {\n            return;\n        }\n        const providerCallbacks = exports.callbacks[provider];\n        const prefix = source.prefix;\n        const items = providerCallbacks[prefix];\n        if (items) {\n            providerCallbacks[prefix] = items.filter((row) => row.id !== id);\n        }\n    });\n}\n/**\n * Update all callbacks for provider and prefix\n */\nfunction updateCallbacks(provider, prefix) {\n    if (pendingUpdates[provider] === void 0) {\n        pendingUpdates[provider] = Object.create(null);\n    }\n    const providerPendingUpdates = pendingUpdates[provider];\n    if (!providerPendingUpdates[prefix]) {\n        providerPendingUpdates[prefix] = true;\n        setTimeout(() => {\n            providerPendingUpdates[prefix] = false;\n            if (exports.callbacks[provider] === void 0 ||\n                exports.callbacks[provider][prefix] === void 0) {\n                return;\n            }\n            // Get all items\n            const items = exports.callbacks[provider][prefix].slice(0);\n            if (!items.length) {\n                return;\n            }\n            const storage = storage_1.getStorage(provider, prefix);\n            // Check each item for changes\n            let hasPending = false;\n            items.forEach((item) => {\n                const icons = item.icons;\n                const oldLength = icons.pending.length;\n                icons.pending = icons.pending.filter((icon) => {\n                    if (icon.prefix !== prefix) {\n                        // Checking only current prefix\n                        return true;\n                    }\n                    const name = icon.name;\n                    if (storage.icons[name] !== void 0) {\n                        // Loaded\n                        icons.loaded.push({\n                            provider,\n                            prefix,\n                            name,\n                        });\n                    }\n                    else if (storage.missing[name] !== void 0) {\n                        // Missing\n                        icons.missing.push({\n                            provider,\n                            prefix,\n                            name,\n                        });\n                    }\n                    else {\n                        // Pending\n                        hasPending = true;\n                        return true;\n                    }\n                    return false;\n                });\n                // Changes detected - call callback\n                if (icons.pending.length !== oldLength) {\n                    if (!hasPending) {\n                        // All icons have been loaded - remove callback from prefix\n                        removeCallback([\n                            {\n                                provider,\n                                prefix,\n                            },\n                        ], item.id);\n                    }\n                    item.callback(icons.loaded.slice(0), icons.missing.slice(0), icons.pending.slice(0), item.abort);\n                }\n            });\n        });\n    }\n}\nexports.updateCallbacks = updateCallbacks;\n/**\n * Unique id counter for callbacks\n */\nlet idCounter = 0;\n/**\n * Add callback\n */\nfunction storeCallback(callback, icons, pendingSources) {\n    // Create unique id and abort function\n    const id = idCounter++;\n    const abort = removeCallback.bind(null, pendingSources, id);\n    if (!icons.pending.length) {\n        // Do not store item without pending icons and return function that does nothing\n        return abort;\n    }\n    // Create item and store it for all pending prefixes\n    const item = {\n        id,\n        icons,\n        callback,\n        abort: abort,\n    };\n    pendingSources.forEach((source) => {\n        const provider = source.provider;\n        const prefix = source.prefix;\n        if (exports.callbacks[provider] === void 0) {\n            exports.callbacks[provider] = Object.create(null);\n        }\n        const providerCallbacks = exports.callbacks[provider];\n        if (providerCallbacks[prefix] === void 0) {\n            providerCallbacks[prefix] = [];\n        }\n        providerCallbacks[prefix].push(item);\n    });\n    return abort;\n}\nexports.storeCallback = storeCallback;\n});\n\nvar modules = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getAPIModule = exports.setAPIModule = void 0;\n/**\n * Local storate types and entries\n */\nconst storage = Object.create(null);\n/**\n * Set API module\n */\nfunction setAPIModule(provider, item) {\n    storage[provider] = item;\n}\nexports.setAPIModule = setAPIModule;\n/**\n * Get API module\n */\nfunction getAPIModule(provider) {\n    return storage[provider] === void 0 ? storage[''] : storage[provider];\n}\nexports.getAPIModule = getAPIModule;\n});\n\nvar config = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getAPIConfig = exports.setAPIConfig = void 0;\n/**\n * Create full API configuration from partial data\n */\nfunction createConfig(source) {\n    let resources;\n    if (typeof source.resources === 'string') {\n        resources = [source.resources];\n    }\n    else {\n        resources = source.resources;\n        if (!(resources instanceof Array) || !resources.length) {\n            return null;\n        }\n    }\n    const result = {\n        // API hosts\n        resources: resources,\n        // Root path\n        path: source.path === void 0 ? '/' : source.path,\n        // URL length limit\n        maxURL: source.maxURL ? source.maxURL : 500,\n        // Timeout before next host is used.\n        rotate: source.rotate ? source.rotate : 750,\n        // Timeout before failing query.\n        timeout: source.timeout ? source.timeout : 5000,\n        // Randomise default API end point.\n        random: source.random === true,\n        // Start index\n        index: source.index ? source.index : 0,\n        // Receive data after time out (used if time out kicks in first, then API module sends data anyway).\n        dataAfterTimeout: source.dataAfterTimeout !== false,\n    };\n    return result;\n}\n/**\n * Local storage\n */\nconst configStorage = Object.create(null);\n/**\n * Redundancy for API servers.\n *\n * API should have very high uptime because of implemented redundancy at server level, but\n * sometimes bad things happen. On internet 100% uptime is not possible.\n *\n * There could be routing problems. Server might go down for whatever reason, but it takes\n * few minutes to detect that downtime, so during those few minutes API might not be accessible.\n *\n * This script has some redundancy to mitigate possible network issues.\n *\n * If one host cannot be reached in 'rotate' (750 by default) ms, script will try to retrieve\n * data from different host. Hosts have different configurations, pointing to different\n * API servers hosted at different providers.\n */\nconst fallBackAPISources = [\n    'https://api.simplesvg.com',\n    'https://api.unisvg.com',\n];\n// Shuffle fallback API\nconst fallBackAPI = [];\nwhile (fallBackAPISources.length > 0) {\n    if (fallBackAPISources.length === 1) {\n        fallBackAPI.push(fallBackAPISources.shift());\n    }\n    else {\n        // Get first or last item\n        if (Math.random() > 0.5) {\n            fallBackAPI.push(fallBackAPISources.shift());\n        }\n        else {\n            fallBackAPI.push(fallBackAPISources.pop());\n        }\n    }\n}\n// Add default API\nconfigStorage[''] = createConfig({\n    resources: ['https://api.iconify.design'].concat(fallBackAPI),\n});\n/**\n * Add custom config for provider\n */\nfunction setAPIConfig(provider, customConfig) {\n    const config = createConfig(customConfig);\n    if (config === null) {\n        return false;\n    }\n    configStorage[provider] = config;\n    return true;\n}\nexports.setAPIConfig = setAPIConfig;\n/**\n * Get API configuration\n */\nconst getAPIConfig = (provider) => configStorage[provider];\nexports.getAPIConfig = getAPIConfig;\n});\n\nvar list = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getProviders = exports.listToIcons = void 0;\n\n/**\n * Convert icons list from string/icon mix to icons and validate them\n */\nfunction listToIcons(list, validate = true, simpleNames = false) {\n    const result = [];\n    list.forEach((item) => {\n        const icon = typeof item === 'string'\n            ? name.stringToIcon(item, false, simpleNames)\n            : item;\n        if (!validate || name.validateIcon(icon, simpleNames)) {\n            result.push({\n                provider: icon.provider,\n                prefix: icon.prefix,\n                name: icon.name,\n            });\n        }\n    });\n    return result;\n}\nexports.listToIcons = listToIcons;\n/**\n * Get all providers\n */\nfunction getProviders(list) {\n    const providers = Object.create(null);\n    list.forEach((icon) => {\n        providers[icon.provider] = true;\n    });\n    return Object.keys(providers);\n}\nexports.getProviders = getProviders;\n});\n\nvar api = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.API = exports.getRedundancyCache = void 0;\n\n\n\n\n\n\n\n\n\n// Empty abort callback for loadIcons()\nfunction emptyCallback() {\n    // Do nothing\n}\nconst pendingIcons = Object.create(null);\n/**\n * List of icons that are waiting to be loaded.\n *\n * List is passed to API module, then cleared.\n *\n * This list should not be used for any checks, use pendingIcons to check\n * if icons is being loaded.\n *\n * [provider][prefix] = array of icon names\n */\nconst iconsToLoad = Object.create(null);\n// Flags to merge multiple synchronous icon requests in one asynchronous request\nconst loaderFlags = Object.create(null);\nconst queueFlags = Object.create(null);\nconst redundancyCache = Object.create(null);\n/**\n * Get Redundancy instance for provider\n */\nfunction getRedundancyCache(provider) {\n    if (redundancyCache[provider] === void 0) {\n        const config$1 = config.getAPIConfig(provider);\n        if (!config$1) {\n            // No way to load icons because configuration is not set!\n            return;\n        }\n        const redundancy$1 = redundancy.initRedundancy(config$1);\n        const cachedReundancy = {\n            config: config$1,\n            redundancy: redundancy$1,\n        };\n        redundancyCache[provider] = cachedReundancy;\n    }\n    return redundancyCache[provider];\n}\nexports.getRedundancyCache = getRedundancyCache;\n/**\n * Function called when new icons have been loaded\n */\nfunction loadedNewIcons(provider, prefix) {\n    // Run only once per tick, possibly joining multiple API responses in one call\n    if (loaderFlags[provider] === void 0) {\n        loaderFlags[provider] = Object.create(null);\n    }\n    const providerLoaderFlags = loaderFlags[provider];\n    if (!providerLoaderFlags[prefix]) {\n        providerLoaderFlags[prefix] = true;\n        setTimeout(() => {\n            providerLoaderFlags[prefix] = false;\n            callbacks.updateCallbacks(provider, prefix);\n        });\n    }\n}\n// Storage for errors for loadNewIcons(). Used to avoid spamming log with identical errors.\nconst errorsCache = Object.create(null);\n/**\n * Load icons\n */\nfunction loadNewIcons(provider, prefix, icons) {\n    function err() {\n        const key = (provider === '' ? '' : '@' + provider + ':') + prefix;\n        const time = Math.floor(Date.now() / 60000); // log once in a minute\n        if (errorsCache[key] < time) {\n            errorsCache[key] = time;\n            console.error('Unable to retrieve icons for \"' +\n                key +\n                '\" because API is not configured properly.');\n        }\n    }\n    // Create nested objects if needed\n    if (iconsToLoad[provider] === void 0) {\n        iconsToLoad[provider] = Object.create(null);\n    }\n    const providerIconsToLoad = iconsToLoad[provider];\n    if (queueFlags[provider] === void 0) {\n        queueFlags[provider] = Object.create(null);\n    }\n    const providerQueueFlags = queueFlags[provider];\n    if (pendingIcons[provider] === void 0) {\n        pendingIcons[provider] = Object.create(null);\n    }\n    const providerPendingIcons = pendingIcons[provider];\n    // Add icons to queue\n    if (providerIconsToLoad[prefix] === void 0) {\n        providerIconsToLoad[prefix] = icons;\n    }\n    else {\n        providerIconsToLoad[prefix] = providerIconsToLoad[prefix]\n            .concat(icons)\n            .sort();\n    }\n    // Redundancy item\n    let cachedReundancy;\n    // Trigger update on next tick, mering multiple synchronous requests into one asynchronous request\n    if (!providerQueueFlags[prefix]) {\n        providerQueueFlags[prefix] = true;\n        setTimeout(() => {\n            providerQueueFlags[prefix] = false;\n            // Get icons and delete queue\n            const icons = providerIconsToLoad[prefix];\n            delete providerIconsToLoad[prefix];\n            // Get API module\n            const api = modules.getAPIModule(provider);\n            if (!api) {\n                // No way to load icons!\n                err();\n                return;\n            }\n            // Get API config and Redundancy instance\n            if (cachedReundancy === void 0) {\n                const redundancy = getRedundancyCache(provider);\n                if (redundancy === void 0) {\n                    // No way to load icons because configuration is not set!\n                    err();\n                    return;\n                }\n                cachedReundancy = redundancy;\n            }\n            // Prepare parameters and run queries\n            const params = api.prepare(provider, prefix, icons);\n            params.forEach((item) => {\n                cachedReundancy.redundancy.query(item, api.send, (data, error) => {\n                    const storage = storage_1.getStorage(provider, prefix);\n                    // Check for error\n                    if (typeof data !== 'object') {\n                        if (error !== 404) {\n                            // Do not handle error unless it is 404\n                            return;\n                        }\n                        // Not found: mark as missing\n                        const t = Date.now();\n                        item.icons.forEach((name) => {\n                            storage.missing[name] = t;\n                        });\n                    }\n                    else {\n                        // Add icons to storage\n                        try {\n                            const added = storage_1.addIconSet(storage, data, 'all');\n                            if (typeof added === 'boolean') {\n                                return;\n                            }\n                            // Remove added icons from pending list\n                            const pending = providerPendingIcons[prefix];\n                            added.forEach((name) => {\n                                delete pending[name];\n                            });\n                            // Cache API response\n                            if (modules$1.coreModules.cache) {\n                                modules$1.coreModules.cache(provider, data);\n                            }\n                        }\n                        catch (err) {\n                            console.error(err);\n                        }\n                    }\n                    // Trigger update on next tick\n                    loadedNewIcons(provider, prefix);\n                });\n            });\n        });\n    }\n}\n/**\n * Check if icon is being loaded\n */\nconst isPending = (icon) => {\n    return (pendingIcons[icon.provider] !== void 0 &&\n        pendingIcons[icon.provider][icon.prefix] !== void 0 &&\n        pendingIcons[icon.provider][icon.prefix][icon.name] !== void 0);\n};\n/**\n * Load icons\n */\nconst loadIcons = (icons, callback) => {\n    // Clean up and copy icons list\n    const cleanedIcons = list.listToIcons(icons, true, functions$3.allowSimpleNames());\n    // Sort icons by missing/loaded/pending\n    // Pending means icon is either being requsted or is about to be requested\n    const sortedIcons = sort.sortIcons(cleanedIcons);\n    if (!sortedIcons.pending.length) {\n        // Nothing to load\n        let callCallback = true;\n        if (callback) {\n            setTimeout(() => {\n                if (callCallback) {\n                    callback(sortedIcons.loaded, sortedIcons.missing, sortedIcons.pending, emptyCallback);\n                }\n            });\n        }\n        return () => {\n            callCallback = false;\n        };\n    }\n    // Get all sources for pending icons\n    const newIcons = Object.create(null);\n    const sources = [];\n    let lastProvider, lastPrefix;\n    sortedIcons.pending.forEach((icon) => {\n        const provider = icon.provider;\n        const prefix = icon.prefix;\n        if (prefix === lastPrefix && provider === lastProvider) {\n            return;\n        }\n        lastProvider = provider;\n        lastPrefix = prefix;\n        sources.push({\n            provider,\n            prefix,\n        });\n        if (pendingIcons[provider] === void 0) {\n            pendingIcons[provider] = Object.create(null);\n        }\n        const providerPendingIcons = pendingIcons[provider];\n        if (providerPendingIcons[prefix] === void 0) {\n            providerPendingIcons[prefix] = Object.create(null);\n        }\n        if (newIcons[provider] === void 0) {\n            newIcons[provider] = Object.create(null);\n        }\n        const providerNewIcons = newIcons[provider];\n        if (providerNewIcons[prefix] === void 0) {\n            providerNewIcons[prefix] = [];\n        }\n    });\n    // List of new icons\n    const time = Date.now();\n    // Filter pending icons list: find icons that are not being loaded yet\n    // If icon was called before, it must exist in pendingIcons or storage, but because this\n    // function is called right after sortIcons() that checks storage, icon is definitely not in storage.\n    sortedIcons.pending.forEach((icon) => {\n        const provider = icon.provider;\n        const prefix = icon.prefix;\n        const name = icon.name;\n        const pendingQueue = pendingIcons[provider][prefix];\n        if (pendingQueue[name] === void 0) {\n            // New icon - add to pending queue to mark it as being loaded\n            pendingQueue[name] = time;\n            // Add it to new icons list to pass it to API module for loading\n            newIcons[provider][prefix].push(name);\n        }\n    });\n    // Load icons on next tick to make sure result is not returned before callback is stored and\n    // to consolidate multiple synchronous loadIcons() calls into one asynchronous API call\n    sources.forEach((source) => {\n        const provider = source.provider;\n        const prefix = source.prefix;\n        if (newIcons[provider][prefix].length) {\n            loadNewIcons(provider, prefix, newIcons[provider][prefix]);\n        }\n    });\n    // Store callback and return abort function\n    return callback\n        ? callbacks.storeCallback(callback, sortedIcons, sources)\n        : emptyCallback;\n};\n/**\n * Export module\n */\nexports.API = {\n    isPending,\n    loadIcons,\n};\n});\n\nvar functions$1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.APIInternalFunctions = exports.APIFunctions = void 0;\n\n\n\nexports.APIFunctions = {\n    loadIcons: api.API.loadIcons,\n    addAPIProvider: config.setAPIConfig,\n};\nexports.APIInternalFunctions = {\n    getAPI: api.getRedundancyCache,\n    getAPIConfig: config.getAPIConfig,\n    setAPIModule: modules.setAPIModule,\n};\n});\n\nvar jsonp = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getAPIModule = void 0;\nlet rootVar = null;\n/**\n * Endpoint\n */\nlet endPoint = '{prefix}.js?icons={icons}&callback={callback}';\n/**\n * Cache: provider:prefix = value\n */\nconst maxLengthCache = Object.create(null);\nconst pathCache = Object.create(null);\n/**\n * Get hash for query\n *\n * Hash is used in JSONP callback name, so same queries end up with same JSONP callback,\n * allowing response to be cached in browser.\n */\nfunction hash(str) {\n    let total = 0, i;\n    for (i = str.length - 1; i >= 0; i--) {\n        total += str.charCodeAt(i);\n    }\n    return total % 999;\n}\n/**\n * Get root object\n */\nfunction getGlobal() {\n    // Create root\n    if (rootVar === null) {\n        // window\n        const globalRoot = self;\n        // Test for window.Iconify. If missing, create 'IconifyJSONP'\n        let prefix = 'Iconify';\n        let extraPrefix = '.cb';\n        if (globalRoot[prefix] === void 0) {\n            // Use 'IconifyJSONP' global\n            prefix = 'IconifyJSONP';\n            extraPrefix = '';\n            if (globalRoot[prefix] === void 0) {\n                globalRoot[prefix] = Object.create(null);\n            }\n            rootVar = globalRoot[prefix];\n        }\n        else {\n            // Use 'Iconify.cb'\n            const iconifyRoot = globalRoot[prefix];\n            if (iconifyRoot.cb === void 0) {\n                iconifyRoot.cb = Object.create(null);\n            }\n            rootVar = iconifyRoot.cb;\n        }\n        // Change end point\n        endPoint = endPoint.replace('{callback}', prefix + extraPrefix + '.{cb}');\n    }\n    return rootVar;\n}\n/**\n * Return API module\n */\nconst getAPIModule = (getAPIConfig) => {\n    /**\n     * Calculate maximum icons list length for prefix\n     */\n    function calculateMaxLength(provider, prefix) {\n        // Get config and store path\n        const config = getAPIConfig(provider);\n        if (!config) {\n            return 0;\n        }\n        // Calculate\n        let result;\n        if (!config.maxURL) {\n            result = 0;\n        }\n        else {\n            let maxHostLength = 0;\n            config.resources.forEach((item) => {\n                const host = item;\n                maxHostLength = Math.max(maxHostLength, host.length);\n            });\n            // Make sure global is set\n            getGlobal();\n            // Extra width: prefix (3) + counter (4) - '{cb}' (4)\n            const extraLength = 3;\n            // Get available length\n            result =\n                config.maxURL -\n                    maxHostLength -\n                    config.path.length -\n                    endPoint\n                        .replace('{provider}', provider)\n                        .replace('{prefix}', prefix)\n                        .replace('{icons}', '').length -\n                    extraLength;\n        }\n        // Cache stuff and return result\n        const cacheKey = provider + ':' + prefix;\n        pathCache[cacheKey] = config.path;\n        maxLengthCache[cacheKey] = result;\n        return result;\n    }\n    /**\n     * Prepare params\n     */\n    const prepare = (provider, prefix, icons) => {\n        const results = [];\n        // Get maximum icons list length\n        const cacheKey = provider + ':' + prefix;\n        let maxLength = maxLengthCache[cacheKey];\n        if (maxLength === void 0) {\n            maxLength = calculateMaxLength(provider, prefix);\n        }\n        // Split icons\n        let item = {\n            provider,\n            prefix,\n            icons: [],\n        };\n        let length = 0;\n        icons.forEach((name, index) => {\n            length += name.length + 1;\n            if (length >= maxLength && index > 0) {\n                // Next set\n                results.push(item);\n                item = {\n                    provider,\n                    prefix,\n                    icons: [],\n                };\n                length = name.length;\n            }\n            item.icons.push(name);\n        });\n        results.push(item);\n        return results;\n    };\n    /**\n     * Load icons\n     */\n    const send = (host, params, status) => {\n        const provider = params.provider;\n        const prefix = params.prefix;\n        const icons = params.icons;\n        const iconsList = icons.join(',');\n        const cacheKey = provider + ':' + prefix;\n        // Create callback prefix\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const cbPrefix = prefix.split('-').shift().slice(0, 3);\n        const global = getGlobal();\n        // Callback hash\n        let cbCounter = hash(provider + ':' + host + ':' + prefix + ':' + iconsList);\n        while (global[cbPrefix + cbCounter] !== void 0) {\n            cbCounter++;\n        }\n        const callbackName = cbPrefix + cbCounter;\n        const path = pathCache[cacheKey] +\n            endPoint\n                .replace('{provider}', provider)\n                .replace('{prefix}', prefix)\n                .replace('{icons}', iconsList)\n                .replace('{cb}', callbackName);\n        global[callbackName] = (data) => {\n            // Remove callback and complete query\n            delete global[callbackName];\n            status.done(data);\n        };\n        // Create URI\n        const uri = host + path;\n        // console.log('API query:', uri);\n        // Create script and append it to head\n        const script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.async = true;\n        script.src = uri;\n        document.head.appendChild(script);\n    };\n    // Return functions\n    return {\n        prepare,\n        send,\n    };\n};\nexports.getAPIModule = getAPIModule;\n});\n\nvar fetch_1 = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getAPIModule = exports.setFetch = void 0;\n/**\n * Endpoint\n */\nconst endPoint = '{prefix}.json?icons={icons}';\n/**\n * Cache\n */\nconst maxLengthCache = Object.create(null);\nconst pathCache = Object.create(null);\n/**\n * Fetch function\n *\n * Use this to set 'cross-fetch' in node.js environment if you are retrieving icons on server side.\n * Not needed when using stuff like Next.js or SvelteKit because components use API only on client side.\n */\nlet fetchModule = null;\ntry {\n    fetchModule = fetch;\n}\ncatch (err) {\n    //\n}\nfunction setFetch(fetch) {\n    fetchModule = fetch;\n}\nexports.setFetch = setFetch;\n/**\n * Return API module\n */\nconst getAPIModule = (getAPIConfig) => {\n    /**\n     * Calculate maximum icons list length for prefix\n     */\n    function calculateMaxLength(provider, prefix) {\n        // Get config and store path\n        const config = getAPIConfig(provider);\n        if (!config) {\n            return 0;\n        }\n        // Calculate\n        let result;\n        if (!config.maxURL) {\n            result = 0;\n        }\n        else {\n            let maxHostLength = 0;\n            config.resources.forEach((item) => {\n                const host = item;\n                maxHostLength = Math.max(maxHostLength, host.length);\n            });\n            // Get available length\n            result =\n                config.maxURL -\n                    maxHostLength -\n                    config.path.length -\n                    endPoint\n                        .replace('{provider}', provider)\n                        .replace('{prefix}', prefix)\n                        .replace('{icons}', '').length;\n        }\n        // Cache stuff and return result\n        const cacheKey = provider + ':' + prefix;\n        pathCache[cacheKey] = config.path;\n        maxLengthCache[cacheKey] = result;\n        return result;\n    }\n    /**\n     * Prepare params\n     */\n    const prepare = (provider, prefix, icons) => {\n        const results = [];\n        // Get maximum icons list length\n        let maxLength = maxLengthCache[prefix];\n        if (maxLength === void 0) {\n            maxLength = calculateMaxLength(provider, prefix);\n        }\n        // Split icons\n        let item = {\n            provider,\n            prefix,\n            icons: [],\n        };\n        let length = 0;\n        icons.forEach((name, index) => {\n            length += name.length + 1;\n            if (length >= maxLength && index > 0) {\n                // Next set\n                results.push(item);\n                item = {\n                    provider,\n                    prefix,\n                    icons: [],\n                };\n                length = name.length;\n            }\n            item.icons.push(name);\n        });\n        results.push(item);\n        return results;\n    };\n    /**\n     * Load icons\n     */\n    const send = (host, params, status) => {\n        const provider = params.provider;\n        const prefix = params.prefix;\n        const icons = params.icons;\n        const iconsList = icons.join(',');\n        const cacheKey = provider + ':' + prefix;\n        const path = pathCache[cacheKey] +\n            endPoint\n                .replace('{provider}', provider)\n                .replace('{prefix}', prefix)\n                .replace('{icons}', iconsList);\n        if (!fetchModule) {\n            // Fail: return 424 Failed Dependency (its not meant to be used like that, but it is the best match)\n            status.done(void 0, 424);\n            return;\n        }\n        // console.log('API query:', host + path);\n        fetchModule(host + path)\n            .then((response) => {\n            if (response.status !== 200) {\n                status.done(void 0, response.status);\n                return;\n            }\n            return response.json();\n        })\n            .then((data) => {\n            if (typeof data !== 'object' || data === null) {\n                return;\n            }\n            // Store cache and complete\n            status.done(data);\n        })\n            .catch((err) => {\n            // Error\n            status.done(void 0, err.errno);\n        });\n    };\n    // Return functions\n    return {\n        prepare,\n        send,\n    };\n};\nexports.getAPIModule = getAPIModule;\n});\n\nvar browserStorage = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.storeCache = exports.loadCache = exports.mock = exports.emptyList = exports.count = exports.config = void 0;\n\n// After changing configuration change it in tests/*/fake_cache.ts\n// Cache version. Bump when structure changes\nconst cacheVersion = 'iconify2';\n// Cache keys\nconst cachePrefix = 'iconify';\nconst countKey = cachePrefix + '-count';\nconst versionKey = cachePrefix + '-version';\n/**\n * Cache expiration\n */\nconst hour = 3600000;\nconst cacheExpiration = 168; // In hours\n/**\n * Storage configuration\n */\nexports.config = {\n    local: true,\n    session: true,\n};\n/**\n * Flag to check if storage has been loaded\n */\nlet loaded = false;\n/**\n * Items counter\n */\nexports.count = {\n    local: 0,\n    session: 0,\n};\n/**\n * List of empty items\n */\nexports.emptyList = {\n    local: [],\n    session: [],\n};\nlet _window = typeof window === 'undefined' ? {} : window;\nfunction mock(fakeWindow) {\n    loaded = false;\n    _window = fakeWindow;\n}\nexports.mock = mock;\n/**\n * Get global\n *\n * @param key\n */\nfunction getGlobal(key) {\n    const attr = key + 'Storage';\n    try {\n        if (_window &&\n            _window[attr] &&\n            typeof _window[attr].length === 'number') {\n            return _window[attr];\n        }\n    }\n    catch (err) {\n        //\n    }\n    // Failed - mark as disabled\n    exports.config[key] = false;\n    return null;\n}\n/**\n * Change current count for storage\n */\nfunction setCount(storage, key, value) {\n    try {\n        storage.setItem(countKey, value + '');\n        exports.count[key] = value;\n        return true;\n    }\n    catch (err) {\n        return false;\n    }\n}\n/**\n * Get current count from storage\n *\n * @param storage\n */\nfunction getCount(storage) {\n    const count = storage.getItem(countKey);\n    if (count) {\n        const total = parseInt(count);\n        return total ? total : 0;\n    }\n    return 0;\n}\n/**\n * Initialize storage\n *\n * @param storage\n * @param key\n */\nfunction initCache(storage, key) {\n    try {\n        storage.setItem(versionKey, cacheVersion);\n    }\n    catch (err) {\n        //\n    }\n    setCount(storage, key, 0);\n}\n/**\n * Destroy old cache\n *\n * @param storage\n */\nfunction destroyCache(storage) {\n    try {\n        const total = getCount(storage);\n        for (let i = 0; i < total; i++) {\n            storage.removeItem(cachePrefix + i);\n        }\n    }\n    catch (err) {\n        //\n    }\n}\n/**\n * Load icons from cache\n */\nconst loadCache = () => {\n    if (loaded) {\n        return;\n    }\n    loaded = true;\n    // Minimum time\n    const minTime = Math.floor(Date.now() / hour) - cacheExpiration;\n    // Load data from storage\n    function load(key) {\n        const func = getGlobal(key);\n        if (!func) {\n            return;\n        }\n        // Get one item from storage\n        const getItem = (index) => {\n            const name = cachePrefix + index;\n            const item = func.getItem(name);\n            if (typeof item !== 'string') {\n                // Does not exist\n                return false;\n            }\n            // Get item, validate it\n            let valid = true;\n            try {\n                // Parse, check time stamp\n                const data = JSON.parse(item);\n                if (typeof data !== 'object' ||\n                    typeof data.cached !== 'number' ||\n                    data.cached < minTime ||\n                    typeof data.provider !== 'string' ||\n                    typeof data.data !== 'object' ||\n                    typeof data.data.prefix !== 'string') {\n                    valid = false;\n                }\n                else {\n                    // Add icon set\n                    const provider = data.provider;\n                    const prefix = data.data.prefix;\n                    const storage = storage_1.getStorage(provider, prefix);\n                    valid = storage_1.addIconSet(storage, data.data);\n                }\n            }\n            catch (err) {\n                valid = false;\n            }\n            if (!valid) {\n                func.removeItem(name);\n            }\n            return valid;\n        };\n        try {\n            // Get version\n            const version = func.getItem(versionKey);\n            if (version !== cacheVersion) {\n                if (version) {\n                    // Version is set, but invalid - remove old entries\n                    destroyCache(func);\n                }\n                // Empty data\n                initCache(func, key);\n                return;\n            }\n            // Get number of stored items\n            let total = getCount(func);\n            for (let i = total - 1; i >= 0; i--) {\n                if (!getItem(i)) {\n                    // Remove item\n                    if (i === total - 1) {\n                        // Last item - reduce country\n                        total--;\n                    }\n                    else {\n                        // Mark as empty\n                        exports.emptyList[key].push(i);\n                    }\n                }\n            }\n            // Update total\n            setCount(func, key, total);\n        }\n        catch (err) {\n            //\n        }\n    }\n    for (const key in exports.config) {\n        load(key);\n    }\n};\nexports.loadCache = loadCache;\n/**\n * Function to cache icons\n */\nconst storeCache = (provider, data) => {\n    if (!loaded) {\n        exports.loadCache();\n    }\n    function store(key) {\n        if (!exports.config[key]) {\n            return false;\n        }\n        const func = getGlobal(key);\n        if (!func) {\n            return false;\n        }\n        // Get item index\n        let index = exports.emptyList[key].shift();\n        if (index === void 0) {\n            // Create new index\n            index = exports.count[key];\n            if (!setCount(func, key, index + 1)) {\n                return false;\n            }\n        }\n        // Create and save item\n        try {\n            const item = {\n                cached: Math.floor(Date.now() / hour),\n                provider,\n                data,\n            };\n            func.setItem(cachePrefix + index, JSON.stringify(item));\n        }\n        catch (err) {\n            return false;\n        }\n        return true;\n    }\n    // Attempt to store at localStorage first, then at sessionStorage\n    if (!store('local')) {\n        store('session');\n    }\n};\nexports.storeCache = storeCache;\n});\n\nvar functions = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.toggleBrowserCache = void 0;\n\n/**\n * Toggle cache\n */\nfunction toggleBrowserCache(storage, value) {\n    switch (storage) {\n        case 'local':\n        case 'session':\n            browserStorage.config[storage] = value;\n            break;\n        case 'all':\n            for (const key in browserStorage.config) {\n                browserStorage.config[key] = value;\n            }\n            break;\n    }\n}\nexports.toggleBrowserCache = toggleBrowserCache;\n});\n\nvar shorthand = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.alignmentFromString = exports.flipFromString = void 0;\nconst separator = /[\\s,]+/;\n/**\n * Apply \"flip\" string to icon customisations\n */\nfunction flipFromString(custom, flip) {\n    flip.split(separator).forEach((str) => {\n        const value = str.trim();\n        switch (value) {\n            case 'horizontal':\n                custom.hFlip = true;\n                break;\n            case 'vertical':\n                custom.vFlip = true;\n                break;\n        }\n    });\n}\nexports.flipFromString = flipFromString;\n/**\n * Apply \"align\" string to icon customisations\n */\nfunction alignmentFromString(custom, align) {\n    align.split(separator).forEach((str) => {\n        const value = str.trim();\n        switch (value) {\n            case 'left':\n            case 'center':\n            case 'right':\n                custom.hAlign = value;\n                break;\n            case 'top':\n            case 'middle':\n            case 'bottom':\n                custom.vAlign = value;\n                break;\n            case 'slice':\n            case 'crop':\n                custom.slice = true;\n                break;\n            case 'meet':\n                custom.slice = false;\n        }\n    });\n}\nexports.alignmentFromString = alignmentFromString;\n});\n\nvar rotate = createCommonjsModule(function (module, exports) {\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.rotateFromString = void 0;\n/**\n * Get rotation value\n */\nfunction rotateFromString(value) {\n    const units = value.replace(/^-?[0-9.]*/, '');\n    function cleanup(value) {\n        while (value < 0) {\n            value += 4;\n        }\n        return value % 4;\n    }\n    if (units === '') {\n        const num = parseInt(value);\n        return isNaN(num) ? 0 : cleanup(num);\n    }\n    else if (units !== value) {\n        let split = 0;\n        switch (units) {\n            case '%':\n                // 25% -> 1, 50% -> 2, ...\n                split = 25;\n                break;\n            case 'deg':\n                // 90deg -> 1, 180deg -> 2, ...\n                split = 90;\n        }\n        if (split) {\n            let num = parseFloat(value.slice(0, value.length - units.length));\n            if (isNaN(num)) {\n                return 0;\n            }\n            num = num / split;\n            return num % 1 === 0 ? cleanup(num) : 0;\n        }\n    }\n    return 0;\n}\nexports.rotateFromString = rotateFromString;\n});\n\n/**\n * Default SVG attributes\n */\nconst svgDefaults = {\n    'xmlns': 'http://www.w3.org/2000/svg',\n    'xmlnsXlink': 'http://www.w3.org/1999/xlink',\n    'aria-hidden': true,\n    'role': 'img',\n    'style': {}, // Include style if it isn't set to add verticalAlign later\n};\n/**\n * Default values for customisations for inline icon\n */\nconst inlineDefaults = { ...customisations.defaults, inline: true };\n/**\n * Render icon\n */\nconst render = (\n// Icon must be validated before calling this function\nicon, \n// Partial properties\nprops, \n// True if icon should have vertical-align added\ninline, \n// Optional reference for SVG, extracted by React.forwardRef()\nref) => {\n    // Get default properties\n    const defaultProps = inline ? inlineDefaults : customisations.defaults;\n    // Get all customisations\n    const customisations$1 = customisations.mergeCustomisations(defaultProps, props);\n    // Create style\n    const style = typeof props.style === 'object' && props.style !== null\n        ? props.style\n        : {};\n    // Create SVG component properties\n    const componentProps = { ...svgDefaults, ref, style };\n    // Get element properties\n    for (let key in props) {\n        const value = props[key];\n        if (value === void 0) {\n            continue;\n        }\n        switch (key) {\n            // Properties to ignore\n            case 'icon':\n            case 'style':\n            case 'children':\n            case 'onLoad':\n            case '_ref':\n            case '_inline':\n                break;\n            // Boolean attributes\n            case 'inline':\n            case 'hFlip':\n            case 'vFlip':\n                customisations$1[key] =\n                    value === true || value === 'true' || value === 1;\n                break;\n            // Flip as string: 'horizontal,vertical'\n            case 'flip':\n                if (typeof value === 'string') {\n                    shorthand.flipFromString(customisations$1, value);\n                }\n                break;\n            // Alignment as string\n            case 'align':\n                if (typeof value === 'string') {\n                    shorthand.alignmentFromString(customisations$1, value);\n                }\n                break;\n            // Color: copy to style\n            case 'color':\n                style.color = value;\n                break;\n            // Rotation as string\n            case 'rotate':\n                if (typeof value === 'string') {\n                    customisations$1[key] = rotate.rotateFromString(value);\n                }\n                else if (typeof value === 'number') {\n                    customisations$1[key] = value;\n                }\n                break;\n            // Remove aria-hidden\n            case 'ariaHidden':\n            case 'aria-hidden':\n                if (value !== true && value !== 'true') {\n                    delete componentProps['aria-hidden'];\n                }\n                break;\n            // Copy missing property if it does not exist in customisations\n            default:\n                if (defaultProps[key] === void 0) {\n                    componentProps[key] = value;\n                }\n        }\n    }\n    // Generate icon\n    const item = build.iconToSVG(icon, customisations$1);\n    // Counter for ids based on \"id\" property to render icons consistently on server and client\n    let localCounter = 0;\n    const id$1 = props.id;\n    // Add icon stuff\n    componentProps.dangerouslySetInnerHTML = {\n        __html: id.replaceIDs(item.body, id$1 ? () => id$1 + '-' + localCounter++ : 'iconify-react-'),\n    };\n    for (let key in item.attributes) {\n        componentProps[key] = item.attributes[key];\n    }\n    if (item.inline && style.verticalAlign === void 0) {\n        style.verticalAlign = '-0.125em';\n    }\n    return React.createElement('svg', componentProps);\n};\n\n/**\n * Enable and disable browser cache\n */\nconst enableCache = (storage) => functions.toggleBrowserCache(storage, true);\nconst disableCache = (storage) => functions.toggleBrowserCache(storage, false);\n/* Storage functions */\n/**\n * Check if icon exists\n */\nconst iconExists = functions$3.storageFunctions.iconExists;\n/**\n * Get icon data\n */\nconst getIcon = functions$3.storageFunctions.getIcon;\n/**\n * List available icons\n */\nconst listIcons = functions$3.storageFunctions.listIcons;\n/**\n * Add one icon\n */\nconst addIcon = functions$3.storageFunctions.addIcon;\n/**\n * Add icon set\n */\nconst addCollection = functions$3.storageFunctions.addCollection;\n/* Builder functions */\n/**\n * Calculate icon size\n */\nconst calculateSize = functions$2.builderFunctions.calculateSize;\n/**\n * Replace unique ids in content\n */\nconst replaceIDs = functions$2.builderFunctions.replaceIDs;\n/**\n * Build SVG\n */\nconst buildIcon = functions$2.builderFunctions.buildIcon;\n/* API functions */\n/**\n * Load icons\n */\nconst loadIcons = functions$1.APIFunctions.loadIcons;\n/**\n * Add API provider\n */\nconst addAPIProvider = functions$1.APIFunctions.addAPIProvider;\n/**\n * Export internal functions that can be used by third party implementations\n */\nconst _api = functions$1.APIInternalFunctions;\n/**\n * Initialise stuff\n */\n// Enable short names\nfunctions$3.allowSimpleNames(true);\n// Set API\nmodules$1.coreModules.api = api.API;\n// Use Fetch API by default\nlet getAPIModule = fetch_1.getAPIModule;\ntry {\n    if (typeof document !== 'undefined' && typeof window !== 'undefined') {\n        // If window and document exist, attempt to load whatever module is available, otherwise use Fetch API\n        getAPIModule =\n            typeof fetch === 'function' && typeof Promise === 'function'\n                ? fetch_1.getAPIModule\n                : jsonp.getAPIModule;\n    }\n}\ncatch (err) {\n    //\n}\nmodules.setAPIModule('', getAPIModule(config.getAPIConfig));\n/**\n * Function to enable node-fetch for getting icons on server side\n */\n_api.setFetch = (nodeFetch) => {\n    fetch_1.setFetch(nodeFetch);\n    if (getAPIModule !== fetch_1.getAPIModule) {\n        getAPIModule = fetch_1.getAPIModule;\n        modules.setAPIModule('', getAPIModule(config.getAPIConfig));\n    }\n};\n/**\n * Browser stuff\n */\nif (typeof document !== 'undefined' && typeof window !== 'undefined') {\n    // Set cache and load existing cache\n    modules$1.coreModules.cache = browserStorage.storeCache;\n    browserStorage.loadCache();\n    const _window = window;\n    // Load icons from global \"IconifyPreload\"\n    if (_window.IconifyPreload !== void 0) {\n        const preload = _window.IconifyPreload;\n        const err = 'Invalid IconifyPreload syntax.';\n        if (typeof preload === 'object' && preload !== null) {\n            (preload instanceof Array ? preload : [preload]).forEach((item) => {\n                try {\n                    if (\n                    // Check if item is an object and not null/array\n                    typeof item !== 'object' ||\n                        item === null ||\n                        item instanceof Array ||\n                        // Check for 'icons' and 'prefix'\n                        typeof item.icons !== 'object' ||\n                        typeof item.prefix !== 'string' ||\n                        // Add icon set\n                        !addCollection(item)) {\n                        console.error(err);\n                    }\n                }\n                catch (e) {\n                    console.error(err);\n                }\n            });\n        }\n    }\n    // Set API from global \"IconifyProviders\"\n    if (_window.IconifyProviders !== void 0) {\n        const providers = _window.IconifyProviders;\n        if (typeof providers === 'object' && providers !== null) {\n            for (let key in providers) {\n                const err = 'IconifyProviders[' + key + '] is invalid.';\n                try {\n                    const value = providers[key];\n                    if (typeof value !== 'object' ||\n                        !value ||\n                        value.resources === void 0) {\n                        continue;\n                    }\n                    if (!config.setAPIConfig(key, value)) {\n                        console.error(err);\n                    }\n                }\n                catch (e) {\n                    console.error(err);\n                }\n            }\n        }\n    }\n}\nclass IconComponent extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            // Render placeholder before component is mounted\n            icon: null,\n        };\n    }\n    /**\n     * Abort loading icon\n     */\n    _abortLoading() {\n        if (this._loading) {\n            this._loading.abort();\n            this._loading = null;\n        }\n    }\n    /**\n     * Update state\n     */\n    _setData(icon) {\n        if (this.state.icon !== icon) {\n            this.setState({\n                icon,\n            });\n        }\n    }\n    /**\n     * Check if icon should be loaded\n     */\n    _checkIcon(changed) {\n        const state = this.state;\n        const icon$1 = this.props.icon;\n        // Icon is an object\n        if (typeof icon$1 === 'object' &&\n            icon$1 !== null &&\n            typeof icon$1.body === 'string') {\n            // Stop loading\n            this._icon = '';\n            this._abortLoading();\n            if (changed || state.icon === null) {\n                // Set data if it was changed\n                this._setData({\n                    data: icon.fullIcon(icon$1),\n                });\n            }\n            return;\n        }\n        // Invalid icon?\n        let iconName;\n        if (typeof icon$1 !== 'string' ||\n            (iconName = name.stringToIcon(icon$1, false, true)) === null) {\n            this._abortLoading();\n            this._setData(null);\n            return;\n        }\n        // Load icon\n        const data = functions$3.getIconData(iconName);\n        if (data === null) {\n            // Icon needs to be loaded\n            if (!this._loading || this._loading.name !== icon$1) {\n                // New icon to load\n                this._abortLoading();\n                this._icon = '';\n                this._setData(null);\n                this._loading = {\n                    name: icon$1,\n                    abort: api.API.loadIcons([iconName], this._checkIcon.bind(this, false)),\n                };\n            }\n            return;\n        }\n        // Icon data is available\n        if (this._icon !== icon$1 || state.icon === null) {\n            // New icon or icon has been loaded\n            this._abortLoading();\n            this._icon = icon$1;\n            // Add classes\n            const classes = ['iconify'];\n            if (iconName.prefix !== '') {\n                classes.push('iconify--' + iconName.prefix);\n            }\n            if (iconName.provider !== '') {\n                classes.push('iconify--' + iconName.provider);\n            }\n            // Set data\n            this._setData({\n                data,\n                classes,\n            });\n            if (this.props.onLoad) {\n                this.props.onLoad(icon$1);\n            }\n        }\n    }\n    /**\n     * Component mounted\n     */\n    componentDidMount() {\n        this._checkIcon(false);\n    }\n    /**\n     * Component updated\n     */\n    componentDidUpdate(oldProps) {\n        if (oldProps.icon !== this.props.icon) {\n            this._checkIcon(true);\n        }\n    }\n    /**\n     * Abort loading\n     */\n    componentWillUnmount() {\n        this._abortLoading();\n    }\n    /**\n     * Render\n     */\n    render() {\n        const props = this.props;\n        const icon = this.state.icon;\n        if (icon === null) {\n            // Render placeholder\n            return props.children\n                ? props.children\n                : React.createElement('span', {});\n        }\n        // Add classes\n        let newProps = props;\n        if (icon.classes) {\n            newProps = {\n                ...props,\n                className: (typeof props.className === 'string'\n                    ? props.className + ' '\n                    : '') + icon.classes.join(' '),\n            };\n        }\n        // Render icon\n        return render(icon.data, newProps, props._inline, props._ref);\n    }\n}\n/**\n * Block icon\n *\n * @param props - Component properties\n */\nconst Icon = React.forwardRef(function Icon(props, ref) {\n    const newProps = {\n        ...props,\n        _ref: ref,\n        _inline: false,\n    };\n    return React.createElement(IconComponent, newProps);\n});\n/**\n * Inline icon (has negative verticalAlign that makes it behave like icon font)\n *\n * @param props - Component properties\n */\nconst InlineIcon = React.forwardRef(function InlineIcon(props, ref) {\n    const newProps = { ...props, _ref: ref, _inline: true };\n    return React.createElement(IconComponent, newProps);\n});\n\nexport { Icon, InlineIcon, _api, addAPIProvider, addCollection, addIcon, buildIcon, calculateSize, disableCache, enableCache, getIcon, iconExists, listIcons, loadIcons, replaceIDs };\n"]},"metadata":{},"sourceType":"module"}